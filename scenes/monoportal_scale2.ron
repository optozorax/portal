(desc:(eng:"# Scaling monoportal\n\nIt constructed from offsetting monoportal, which upper part is transformed into trapezoid and everything dependent scaled to match this trapezoid.\n\nThis portal has one continuous surface which can enlarge or reduce objects.",rus:"# Масштабирующий монопортал\n\nОн собран из смещающего монопортала, верхняя часть которого превращена в трапецию и в соответствии с этим изменился масштаб всего что от неё зависело.\n\nДанный портал состоит из одной непрерывной поверхности, при вхождении в которую возможно как увеличиваться так и уменьшаться.\n"),cam:(look_at:(0,0,0),alpha:2.0478366719025245,beta:1.1370006669461712,r:3.8500000000000267,offset_after_material:0.000025),uniforms:(ids:(available:[],max:22),storage:{(0):Named(Float((min:Some(0),max:None,value:4)),"room_size_x"),(1):Named(Float((min:Some(0),max:None,value:4)),"room_size_y"),(2):Named(Float((min:Some(0),max:None,value:4)),"room_size_z"),(3):Inline(Formula(("-room_size_x"))),(4):Inline(Formula(("-room_size_y"))),(5):Inline(Formula(("-room_size_z"))),(6):Named(Float((min:Some(0),max:None,value:0.5)),"height"),(7):Named(Float((min:Some(0),max:None,value:1)),"width"),(8):Named(Float((min:Some(1),max:None,value:2)),"scale"),(9):Named(Float((min:Some(0),max:None,value:0.13)),"border"),(10):Inline(Formula(("height + height/scale"))),(11):Inline(Formula(("1.0 / scale"))),(12):Inline(Formula(("-height"))),(13):Inline(Formula(("height + 2 * height/scale"))),(14):Inline(Formula(("1.0 / scale_shape / scale"))),(15):Named(Formula(("scale")),"scale_shape"),(16):Inline(Float((min:None,max:None,value:1))),(17):Named(Progress(0),"progress"),(18):Inline(Formula(("1.0 + progress"))),(19):Inline(Float((min:None,max:None,value:2))),(20):Inline(Formula(("1.0 + progress"))),(21):Inline(Formula(("scale")))},storage_order:[(0),(1),(2),(6),(7),(8),(9),(15),(17)]),matrices:(ids:(available:[],max:18),storage:{(0):Named(Simple(offset:(0,0,0),scale:1,rotate:(0,0,0),mirror:(false,false,false)),"room_origin"),(1):Inline(Mul(to:Some(((2))),what:Some(((0))))),(2):Inline(Parametrized(offset:(x:Yes(Some(((0)))),y:No(0),z:No(0)),rotate:(x:No(0),y:No(1.5707963267948966),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1))),(3):Inline(Mul(to:Some(((4))),what:Some(((0))))),(4):Inline(Parametrized(offset:(x:Yes(Some(((3)))),y:No(0),z:No(0)),rotate:(x:No(0),y:No(1.5707963267948966),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1))),(5):Inline(Mul(to:Some(((6))),what:Some(((0))))),(6):Inline(Parametrized(offset:(x:No(0),y:Yes(Some(((1)))),z:No(0)),rotate:(x:No(1.5707963267948966),y:No(0),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1))),(7):Inline(Mul(to:Some(((8))),what:Some(((0))))),(8):Inline(Parametrized(offset:(x:No(0),y:Yes(Some(((4)))),z:No(0)),rotate:(x:No(1.5707963267948966),y:No(0),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1))),(9):Inline(Mul(to:Some(((10))),what:Some(((0))))),(10):Inline(Parametrized(offset:(x:No(0),y:No(0),z:Yes(Some(((2))))),rotate:(x:No(0),y:No(0),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1))),(11):Inline(Mul(to:Some(((12))),what:Some(((0))))),(12):Inline(Parametrized(offset:(x:No(0),y:No(0),z:Yes(Some(((5))))),rotate:(x:No(0),y:No(0),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1))),(13):Named(Simple(offset:(0,0,0),scale:1,rotate:(0,0,0),mirror:(false,false,false)),"a"),(14):Named(Parametrized(offset:(x:No(0),y:Yes(Some(((10)))),z:No(0)),rotate:(x:No(0),y:No(3.141592653589793),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:Yes(Some(((11))))),"b"),(15):Named(Parametrized(offset:(x:No(0),y:Yes(Some(((12)))),z:No(0)),rotate:(x:No(4.71238898038469),y:No(0),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1)),"support_a"),(16):Named(Parametrized(offset:(x:No(0),y:Yes(Some(((13)))),z:No(0)),rotate:(x:No(4.71238898038469),y:No(0),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:Yes(Some(((14))))),"support_b"),(17):Named(Simple(offset:(0,0,0.71),scale:1,rotate:(4.71238898038469,0,0),mirror:(false,false,false)),"triangle")},storage_order:[(0),(13),(14),(15),(16),(17)]),objects:(ids:(available:[],max:9),storage:{(0):Named(Flat(kind:Simple(Some(((1)))),is_inside:(("return is_inside_square(x, y, room_size_z_u, room_size_y_u, room_yellow_M);"))),"room_x+"),(1):Named(Flat(kind:Simple(Some(((3)))),is_inside:(("return is_inside_square(x, y, room_size_z_u, room_size_y_u, room_red_M);"))),"room_x-"),(2):Named(Flat(kind:Simple(Some(((5)))),is_inside:(("return is_inside_square(x, y, room_size_x_u, room_size_z_u, room_black_M);"))),"room_y+"),(3):Named(Flat(kind:Simple(Some(((7)))),is_inside:(("return is_inside_square(x, y, room_size_x_u, room_size_z_u, room_gray_M);"))),"room_y-"),(4):Named(Flat(kind:Simple(Some(((9)))),is_inside:(("return is_inside_square(x, y, room_size_x_u, room_size_y_u, room_blue_M);"))),"room_z+"),(5):Named(Flat(kind:Simple(Some(((11)))),is_inside:(("return is_inside_square(x, y, room_size_x_u, room_size_y_u, room_green_M);"))),"room_z-"),(6):Named(Flat(kind:Portal(Some(((13))),Some(((14)))),is_inside:(("if (abs(y) > height_u) return NOT_INSIDE;\n\nfloat p = (y + height_u) / (2.0 * height_u);\nfloat width = width_u * (1.0 / scale_shape_u + (1.0 - p) * (1.0 - 1.0 / scale_shape_u));\n\nfloat border_offset = border_u / (2.0 * height_u / sqrt(sqr(2.0 * height_u) + sqr(width_u / 2.0 * (1.0 - 1.0 / scale_u))));\n\nif (!first) border_offset *= scale_u;\n\nif (abs(x) > width + border_offset) return NOT_INSIDE;\nif (abs(x) > width) return black_solid_M;\n\nif (back) return portal_blue_M;\n\nreturn TELEPORT;"))),"monoportal"),(7):Named(Flat(kind:Portal(Some(((15))),Some(((16)))),is_inside:(("if (y > 0.) return NOT_INSIDE;\nfloat value = x*x + y*y;\nfloat border = border_u;\nif (!first) border *= scale_u * scale_shape_u;\nfloat width = width_u;\n\nint material = NOT_INSIDE;\n\nif (value < sqr(width + border)) material = black_solid_M;\nif (value < sqr(width) && !back) material = TELEPORT;\n\nreturn material;"))),"support portals"),(8):Named(Flat(kind:Simple(Some(((17)))),is_inside:(("return is_inside_triangle(x, y, 2.0, 1.0, 0.02, triangle_white_M, triangle_black_M);"))),"triangle")},storage_order:[(0),(1),(2),(3),(4),(5),(6),(7),(8)]),cameras:(ids:(available:[],max:0),storage:{},storage_order:[]),textures:(ids:(available:[],max:0),storage:{},storage_order:[]),materials:(ids:(available:[],max:12),storage:{(0):Named(Simple(color:(0.7647179,0.7024815,0.061205085),normal_coef:0.5,grid:true,grid_scale:1,grid_coef:0.3),"room_yellow"),(1):Named(Simple(color:(0.029196177,0.029196177,0.029196177),normal_coef:0.5,grid:true,grid_scale:1,grid_coef:0.3),"room_black"),(2):Named(Simple(color:(0.8458183,0.07454156,0.07454156),normal_coef:0.5,grid:true,grid_scale:1,grid_coef:0.3),"room_red"),(3):Named(Simple(color:(0.18068509,0.18068509,0.18068509),normal_coef:0.5,grid:true,grid_scale:1,grid_coef:0.3),"room_gray"),(4):Named(Simple(color:(0.116810285,0.26798066,0.9083436),normal_coef:0.5,grid:true,grid_scale:1,grid_coef:0.3),"room_blue"),(5):Named(Simple(color:(0.15478948,0.73873776,0.2186588),normal_coef:0.5,grid:true,grid_scale:1,grid_coef:0.3),"room_green"),(6):Named(Simple(color:(0.03557645,0.6446965,0.79122156),normal_coef:0.5,grid:true,grid_scale:4,grid_coef:0.3),"portal_blue"),(7):Named(Simple(color:(0.9317271,0.42666554,0.051948573),normal_coef:0.5,grid:true,grid_scale:4,grid_coef:0.3),"portal_orange"),(8):Named(Simple(color:(0.6666666666666666,0.6666666666666666,0.6666666666666666),normal_coef:0.5,grid:true,grid_scale:5,grid_coef:0.3),"grid_gray"),(9):Named(Simple(color:(0,0,0),normal_coef:0.5,grid:false,grid_scale:4,grid_coef:0.3),"black_solid"),(10):Named(Simple(color:(0.7686274509803922,0.7686274509803922,0.7686274509803922),normal_coef:0.5,grid:false,grid_scale:4,grid_coef:0.3),"triangle_white"),(11):Named(Simple(color:(0.043137254901960784,0.043137254901960784,0.043137254901960784),normal_coef:0.5,grid:false,grid_scale:4,grid_coef:0.3),"triangle_black")},storage_order:[(0),(2),(1),(3),(4),(5),(6),(7),(8),(9),(10),(11)]),library:(ids:(available:[],max:2),storage:{(0):Named((("int is_inside_square(float x, float y, float sizex, float sizey, int material) {\n  if (abs(x) < sizex && abs(y) < sizey) {\n    return material;\n  } else {\n    return NOT_INSIDE;\n  }\n}\n")),"room"),(1):Named((("int is_inside_triangle(float x, float y, float angle, float width, float border, int inner_m, int border_m) {\n  float value = width * 0.7 - abs(x)*angle;\n  if (between(border, y, value - border * angle)) {\n    return inner_m;\n  } else if (between(0., y, value)) {\n    return border_m;\n  } else {\n    return NOT_INSIDE;\n  }\n}")),"triangle")},storage_order:[(0),(1)]),animations_filters:(uniforms:({((0)):false,((6)):true,((17)):true,((8)):true,((7)):true,((1)):false,((9)):false,((2)):false,((15)):true}),matrices:({((14)):false,((13)):false,((15)):false,((0)):false,((16)):false,((17)):true}),cameras:({})),elements_descriptions:(uniforms:({((15)):(help_description:None,overrided_name:""),((17)):(help_description:None,overrided_name:"Progress"),((7)):(help_description:None,overrided_name:"Width"),((6)):(help_description:None,overrided_name:"Height"),((8)):(help_description:None,overrided_name:"Scale")}),matrices:({((17)):(help_description:None,overrided_name:"Triangle")}),cameras:({})),user_uniforms:(uniforms:({((1)):false,((8)):false,((2)):false,((17)):false,((15)):false,((9)):false,((0)):false,((6)):false,((7)):false}),matrices:({((13)):false,((0)):false,((14)):false,((15)):false,((16)):false,((17)):false})),animation_stages:(ids:(available:[],max:3),storage:{(0):Named((name:(eng:"Rect to trapezoid",rus:"Прямоугольник в трапецию"),description:None,uniforms:({((2)):FromDev,((7)):FromDev,((9)):FromDev,((17)):ProvidedToUser,((6)):FromDev,((0)):FromDev,((15)):Changed(Some(((18)))),((8)):Changed(Some(((16)))),((1)):FromDev}),matrices:({((0)):FromDev,((15)):FromDev,((13)):FromDev,((16)):FromDev,((14)):FromDev}),original_cam_button:false,set_cam:None,cams:{}),"trapezoid"),(1):Named((name:(eng:"To scale monoportal",rus:"В масштабирующий монопортал"),description:None,uniforms:({((17)):ProvidedToUser,((0)):FromDev,((6)):FromDev,((2)):FromDev,((8)):Changed(Some(((20)))),((15)):Changed(Some(((19)))),((1)):FromDev,((7)):FromDev,((9)):FromDev}),matrices:({((13)):FromDev,((15)):FromDev,((16)):FromDev,((0)):FromDev,((14)):FromDev}),original_cam_button:false,set_cam:None,cams:{}),"done"),(2):Named((name:(eng:"Explore",rus:"Исследование"),description:None,uniforms:({((15)):Changed(Some(((21)))),((7)):ProvidedToUser,((6)):ProvidedToUser,((17)):FromDev,((9)):FromDev,((2)):FromDev,((8)):ProvidedToUser,((0)):FromDev,((1)):FromDev}),matrices:({((0)):FromDev,((13)):FromDev,((16)):FromDev,((15)):FromDev,((14)):FromDev,((17)):ProvidedToUser}),original_cam_button:false,set_cam:None,cams:{}),"explore")},storage_order:[(0),(1),(2)]),current_stage:Some(((2))),dev_stage:(uniforms:({((17)):Progress(0),((7)):Float((min:Some(0),max:None,value:1)),((9)):Float((min:Some(0),max:None,value:0.13)),((1)):Float((min:Some(0),max:None,value:4)),((2)):Float((min:Some(0),max:None,value:4)),((15)):Float((min:Some(1),max:None,value:2)),((0)):Float((min:Some(0),max:None,value:4)),((6)):Float((min:Some(0),max:None,value:0.5)),((8)):Float((min:Some(1),max:None,value:2))}),matrices:({((16)):Parametrized(offset:(x:No(0),y:Yes(Some(((13)))),z:No(0)),rotate:(x:No(4.71238898038469),y:No(0),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:Yes(Some(((14))))),((14)):Parametrized(offset:(x:No(0),y:Yes(Some(((10)))),z:No(0)),rotate:(x:No(0),y:No(3.141592653589793),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:Yes(Some(((11))))),((15)):Parametrized(offset:(x:No(0),y:Yes(Some(((12)))),z:No(0)),rotate:(x:No(4.71238898038469),y:No(0),z:No(0)),mirror:(x:No(0),y:No(0),z:No(0)),scale:No(1)),((17)):Simple(offset:(0,0,0.71),scale:1,rotate:(4.71238898038469,0,0),mirror:(false,false,false)),((13)):Simple(offset:(0,0,0),scale:1,rotate:(0,0,0),mirror:(false,false,false)),((0)):Simple(offset:(0,0,0),scale:1,rotate:(0,0,0),mirror:(false,false,false))})))