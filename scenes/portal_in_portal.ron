(
    desc: (
        eng: "# Problem\n\nWhat if we put one portal into another? This is the question that worried people since Portal game came. And this is finally solved in this demo.\n\nClarify: here we put «output» of portal into his «input», this is the reason of all difficulty of this scene. We can take 4 portals and take two not connected portals and put one into anouther without getting trouble, but this is not interesting.\n\n# Previous solution\n\nMy previous solution was published on [YouTube](https://www.youtube.com/watch?v=fWkAfa96OmI), [Reddit](https://www.reddit.com/r/Portal/comments/l9agp9/this_happens_if_you_put_one_portal_inside_another/) and [Pikabu](https://pikabu.ru/story/portal_v_portale_reshenie_problemyi_s_pomoshchyu_simulyatsii_7066445).\n\nPreviously I solved this in very difficult and naive way: by calculations on polygons and without matrices (I invented my weak coordinate system structure). And this was so difficult that by two years of half-strength development I created only one thing that you can see on the YouTube. Another scenes like triple portal in triple portal was not working because of bugs which I still can\'t understand.\n\nI always know that there must be way to solve this much easily, like brute-force. And finally I found the solution.\n\nHere everything works like ray-tracing: for each ray we find teleport teleportation degree where this ray belongs to. I solve this up to 10 teleportation degree, but this approach may works slow, and can be acceptable for a demo, but is not acceptable for game of movie.\n\nNow I am more and more convinvced that not hard work is important, but ability to find tricky and roundabout way to solve problem, ability to deep thinking.\n\n# How this works\n\nYou can disable teleportation light to better understand how this works.\n\n- Color is represent teleportation degree: Red — 1, Green — 2, Blue — 3 etc.\n- «Input» and «Output» portals must have the same shape.\n- When Red portal enters Red portal, the teleported portal will be Green, then this part is cuted from both of the portals (because previous item) and added to the green portal.\n- When Red portal enters Green, or Green enters Red, the teleported portal will be Blue, i.e. 3 degree. Degrees just sums up.\n- Portals with different colors — different portals which is just connected through space or throug another portal.\n\n# Twitter\n\n<https://twitter.com/optozorax/status/1373536393411051520>\n",
        rus: "# Проблема\n\nЧто будет если мы поместим один портал в другой? Вопрос, который волновал людей с момента выхода игры Portal наконец решён.\n\nУточнение: здесь мы помещаем «вход» портала в его «выход», в этом заключается вся сложность; мы можем взять 4 портала и поместить один портал в другой так чтобы не возникло проблем, но это не интересно.\n\n# Предыдущее решение\n\nПредыдущее решение я опубликовал на [YouTube](https://www.youtube.com/watch?v=fWkAfa96OmI), [Reddit](https://www.reddit.com/r/Portal/comments/l9agp9/this_happens_if_you_put_one_portal_inside_another/) и [Pikabu](https://pikabu.ru/story/portal_v_portale_reshenie_problemyi_s_pomoshchyu_simulyatsii_7066445).\n\nВ прошлый раз я делал это очень сложным и наивным способом — через вычисления над полигонами, и без матриц (сам придумал структуру системы координат). И это было настолько сложно, что за пару лет на разработки из полсилы в свободное время я смог сделать только то что можно наблюдать в видео на YouTube. Другие типы вхождения портала в портал или вхождение тройного портала в тройной портал работали с дикими багами, которые настолько сложно осознать, что я до сих пор не до конца понимаю в чём проблема, хоть я это и визуализировал миллион раз.\n\nУ меня давно были мысли о том, что это должно как-то решаться проще, должен быть подход который всё упрощает. По аналогии с тем как брутфорс позволяет решить задачу просто, но не очень быстро. И вот, наконец, я данный способ нашёл.\n\nЗдесь всё работает аналогично рей-трейсингу: для каждого луча перебираются все степени телепортации и определяется в какую он упал, и какая ближе. Я задал границу в 10 степеней телепортации, и такой подход может быть довольно медленным, что приемлемо для демки, но неприемлемо для игры или фильма.\n\nТеперь я ещё больше убеждаюсь в том, что важнее не упорный труд, а умение придумать обходной и хитрый путь, умение думать мозгами.\n\n# Как это работает\n\nМожно отключить опцию телепортации света для порталов чтобы лучше понимать что происходит. По пунктам:\n\n- Цветом показывается степень телепортации, Красный — 1, Зелёный — 2, Синий — 3 итд.\n- «Вход» и «выход» всегда обязаны совпадать по форме.\n- При входе красного портала в красный, вошедшая часть получается степень 2, и обрезается с обоих красных порталов, становится зелёной и добавляется в зелёный портал.\n- При входе красного в зелёный, зелёного в красный получается синий, степень просто суммируется.\n- Порталы с разными цветами — разные порталы, просто находящиеся рядом, и связанные через портальную поверхность.\n\n# Twitter\n\n<https://twitter.com/optozorax/status/1373536393411051520>",
    ),
    cam: (
        look_at: (0, 0, 0),
        alpha: -0.18154193666606502,
        beta: 1.3526528658900567,
        r: 1.9233658903080386,
        offset_after_material: 0.0000022,
    ),
    uniforms: ([
        (
            name: "room_size_x",
            data: Float((
                min: Some(0),
                max: None,
                value: 4,
            )),
        ),
        (
            name: "room_size_y",
            data: Float((
                min: Some(0),
                max: None,
                value: 4,
            )),
        ),
        (
            name: "room_size_z",
            data: Float((
                min: Some(0),
                max: None,
                value: 4,
            )),
        ),
        (
            name: "teleport_light",
            data: Bool(true),
        ),
        (
            name: "progress",
            data: Progress(0),
        ),
        (
            name: "speed",
            data: Progress(0.1),
        ),
        (
            name: "filter_teleported",
            data: Bool(true),
        ),
        (
            name: "show_teleported",
            data: Int((
                min: Some(0),
                max: Some(50),
                value: 10,
            )),
        ),
        (
            name: "show_object",
            data: Bool(false),
        ),
        (
            name: "tr_x",
            data: Progress(0),
        ),
        (
            name: "tr_y",
            data: Progress(0),
        ),
        (
            name: "tr_z",
            data: Progress(0),
        ),
        (
            name: "shape",
            data: Int((
                min: Some(0),
                max: Some(2),
                value: 0,
            )),
        ),
        (
            name: "border_size",
            data: Formula(("0.035")),
        ),
        (
            name: "black_border_size",
            data: Formula(("0.01")),
        ),
        (
            name: "pass_angle",
            data: Angle(0.7853981633974483),
        ),
        (
            name: "pass_scale",
            data: Float((
                min: Some(0),
                max: Some(1.5),
                value: 1,
            )),
        ),
        (
            name: "pass_offset",
            data: Float((
                min: Some(-0.5),
                max: Some(1.5),
                value: 0,
            )),
        ),
        (
            name: "pass_use_teleported_matrix",
            data: Bool(false),
        ),
        (
            name: "pass_progress",
            data: Float((
                min: Some(-0.5),
                max: Some(1.5),
                value: 0,
            )),
        ),
        (
            name: "pass_not_disable_orange_portal",
            data: Bool(false),
        ),
        (
            name: "gray_room",
            data: Bool(false),
        ),
        (
            name: "show_cube",
            data: Bool(false),
        ),
        (
            name: "show_arrow",
            data: Bool(false),
        ),
        (
            name: "arrow_scale",
            data: Progress(0),
        ),
        (
            name: "progress_2",
            data: Progress(0),
        ),
        (
            name: "cube_position",
            data: Progress(0),
        ),
        (
            name: "cube_scale",
            data: Progress(1),
        ),
        (
            name: "violet_progress",
            data: Progress(0),
        ),
        (
            name: "portal_scale",
            data: Progress(1),
        ),
        (
            name: "double_sided",
            data: Bool(false),
        ),
    ]),
    matrices: ([
        (
            name: "room_origin",
            data: Simple(
                offset: (0, 0, 0),
                scale: 1,
                rotate: (0, 0, 0),
                mirror: (false, false, false),
            ),
        ),
        (
            name: "a",
            data: Simple(
                offset: (0, 0, -1),
                scale: 1,
                rotate: (0, 0, 0),
                mirror: (false, false, false),
            ),
        ),
        (
            name: "b0",
            data: Parametrized(
                offset: (
                    x: Value(0),
                    y: Value(0),
                    z: Uniform(Some(Inline(Formula(("1 - progress * 1.73"))))),
                ),
                rotate: (
                    x: Uniform(Some(Inline(Formula(("deg2rad(-90) * min(progress, 0.5) / 0.5"))))),
                    y: Uniform(Some(Inline(Formula(("deg2rad(-90) * min(progress, 0.5) / 0.5"))))),
                    z: Value(0),
                ),
                mirror: (
                    x: Value(0),
                    y: Value(0),
                    z: Value(0),
                ),
                scale: Value(1),
            ),
        ),
        (
            name: "b1",
            data: Teleport(
                first_portal: Some(Named("a")),
                second_portal: Some(Named("b0")),
                what: Some(Named("b0")),
            ),
        ),
        (
            name: "b2",
            data: Teleport(
                first_portal: Some(Named("a")),
                second_portal: Some(Named("b0")),
                what: Some(Named("b1")),
            ),
        ),
        (
            name: "tr",
            data: Simple(
                offset: (0.27, 0.39, -1.01),
                scale: 0.1,
                rotate: (1.5707963267948966, 0, 0),
                mirror: (false, false, false),
            ),
        ),
        (
            name: "tra0",
            data: Teleport(
                first_portal: Some(Named("a")),
                second_portal: Some(Named("b0")),
                what: Some(Named("tr")),
            ),
        ),
        (
            name: "tra1",
            data: Teleport(
                first_portal: Some(Named("a")),
                second_portal: Some(Named("b1")),
                what: Some(Named("tr")),
            ),
        ),
        (
            name: "tra2",
            data: Teleport(
                first_portal: Some(Named("a")),
                second_portal: Some(Named("b2")),
                what: Some(Named("tr")),
            ),
        ),
        (
            name: "b_pass",
            data: Mul(
                to: Some(Inline(Simple(
                    offset: (0, 0, 0),
                    scale: 1,
                    rotate: (3.141592653589793, 0, 3.141592653589793),
                    mirror: (false, false, false),
                ))),
                what: Some(Inline(Parametrized(
                    offset: (
                        x: Uniform(Some(Inline(Formula(("(-(2^0.5)/2*(1-pass_offset)-((2^0.5)/2+border_size+black_border_size)*cos(pass_angle)*pass_scale) * (1-2*pass_progress)-(2^0.5)/2*pass_offset"))))),
                        y: Value(0),
                        z: Uniform(Some(Inline(Formula(("((2^0.5)/2+border_size+black_border_size)*sin(pass_angle)*pass_scale * (1-2*pass_progress)"))))),
                    ),
                    rotate: (
                        x: Value(0),
                        y: Uniform(Some(Named("pass_angle"))),
                        z: Value(0),
                    ),
                    mirror: (
                        x: Value(0),
                        y: Value(0),
                        z: Value(0),
                    ),
                    scale: Uniform(Some(Named("pass_scale"))),
                ))),
            ),
        ),
        (
            name: "b_pass_on_a",
            data: Teleport(
                first_portal: Some(Inline(Simple(
                    offset: (0, 0, 0),
                    scale: 1,
                    rotate: (0, 0, 0),
                    mirror: (false, false, false),
                ))),
                second_portal: Some(Named("a")),
                what: Some(Named("b_pass")),
            ),
        ),
        (
            name: "empty",
            data: Simple(
                offset: (0, 0, 0),
                scale: 1,
                rotate: (0, 0, 0),
                mirror: (false, false, false),
            ),
        ),
        (
            name: "b_pic4",
            data: Simple(
                offset: (-0.42, 0.01, -0.02),
                scale: 1,
                rotate: (4.9218284906240095, 4.71238898038469, 0),
                mirror: (true, false, false),
            ),
        ),
        (
            name: "cube",
            data: Simple(
                offset: (0, 0, 0),
                scale: 1,
                rotate: (0, 3.141592653589793, 0),
                mirror: (false, false, false),
            ),
        ),
        (
            name: "cube_teleported",
            data: Teleport(
                first_portal: Some(Named("a")),
                second_portal: Some(Named("b0")),
                what: Some(Named("cube2")),
            ),
        ),
        (
            name: "cube2",
            data: Mul(
                to: Some(Inline(Simple(
                    offset: (0, 0, 0),
                    scale: 0.07,
                    rotate: (0, 0, 0),
                    mirror: (false, false, false),
                ))),
                what: Some(Named("cube")),
            ),
        ),
        (
            name: "c0",
            data: Parametrized(
                offset: (
                    x: Value(-1.66),
                    y: Value(0),
                    z: Value(-0.02),
                ),
                rotate: (
                    x: Value(0),
                    y: Value(4.71238898038469),
                    z: Value(0),
                ),
                mirror: (
                    x: Value(0),
                    y: Value(0),
                    z: Value(0),
                ),
                scale: Uniform(Some(Inline(Formula(("violet_progress"))))),
            ),
        ),
    ]),
    objects: ([
        (
            name: "room_x+",
            data: Flat(
                kind: Simple(Some(Inline(Mul(
                    to: Some(Inline(Parametrized(
                        offset: (
                            x: Uniform(Some(Named("room_size_x"))),
                            y: Value(0),
                            z: Value(0),
                        ),
                        rotate: (
                            x: Value(0),
                            y: Value(1.5707963267948966),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    ))),
                    what: Some(Named("room_origin")),
                )))),
                is_inside: (("if (gray_room_u == 1) {\nreturn is_inside_square(x, y, room_size_z_u, room_size_y_u, room_white2_M);\n}\nreturn is_inside_square(x, y, room_size_z_u, room_size_y_u, room_yellow_M);")),
                in_subspace: Normal,
            ),
        ),
        (
            name: "room_x-",
            data: Flat(
                kind: Simple(Some(Inline(Mul(
                    to: Some(Inline(Parametrized(
                        offset: (
                            x: Uniform(Some(Inline(Formula(("-room_size_x"))))),
                            y: Value(0),
                            z: Value(0),
                        ),
                        rotate: (
                            x: Value(0),
                            y: Value(1.5707963267948966),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    ))),
                    what: Some(Named("room_origin")),
                )))),
                is_inside: (("if (gray_room_u == 1) {\nreturn is_inside_square(x, y, room_size_z_u, room_size_y_u, room_white2_M);\n}\n\nreturn is_inside_square(x, y, room_size_z_u, room_size_y_u, room_red_M);")),
                in_subspace: Normal,
            ),
        ),
        (
            name: "room_y+",
            data: Flat(
                kind: Simple(Some(Inline(Mul(
                    to: Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Uniform(Some(Named("room_size_y"))),
                            z: Value(0),
                        ),
                        rotate: (
                            x: Value(1.5707963267948966),
                            y: Value(0),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    ))),
                    what: Some(Named("room_origin")),
                )))),
                is_inside: (("if (gray_room_u == 1) {\nreturn is_inside_square(x, y, room_size_z_u, room_size_y_u, room_black2_M);\n}\n\nreturn is_inside_square(x, y, room_size_x_u, room_size_z_u, room_black_M);")),
                in_subspace: Normal,
            ),
        ),
        (
            name: "room_y-",
            data: Flat(
                kind: Simple(Some(Inline(Mul(
                    to: Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Uniform(Some(Inline(Formula(("-room_size_y"))))),
                            z: Value(0),
                        ),
                        rotate: (
                            x: Value(1.5707963267948966),
                            y: Value(0),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    ))),
                    what: Some(Named("room_origin")),
                )))),
                is_inside: (("if (gray_room_u == 1) {\nreturn is_inside_square(x, y, room_size_z_u, room_size_y_u, room_black2_M);\n}\n\nreturn is_inside_square(x, y, room_size_x_u, room_size_z_u, room_gray_M);")),
                in_subspace: Normal,
            ),
        ),
        (
            name: "room_z+",
            data: Flat(
                kind: Simple(Some(Inline(Mul(
                    to: Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Value(0),
                            z: Uniform(Some(Named("room_size_z"))),
                        ),
                        rotate: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    ))),
                    what: Some(Named("room_origin")),
                )))),
                is_inside: (("if (gray_room_u == 1) {\nreturn is_inside_square(x, y, room_size_z_u, room_size_y_u, room_white2_M);\n}\n\nreturn is_inside_square(x, y, room_size_x_u, room_size_y_u, room_blue_M);")),
                in_subspace: Normal,
            ),
        ),
        (
            name: "room_z-",
            data: Flat(
                kind: Simple(Some(Inline(Mul(
                    to: Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Value(0),
                            z: Uniform(Some(Inline(Formula(("-room_size_z"))))),
                        ),
                        rotate: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    ))),
                    what: Some(Named("room_origin")),
                )))),
                is_inside: (("if (gray_room_u == 1) {\nreturn is_inside_square(x, y, room_size_z_u, room_size_y_u, room_white2_M);\n}\n\nreturn is_inside_square(x, y, room_size_x_u, room_size_y_u, room_green_M);")),
                in_subspace: Normal,
            ),
        ),
        (
            name: "triangle",
            data: Flat(
                kind: Simple(Some(Named("tr"))),
                is_inside: (("if (show_object_u == 0) return NOT_INSIDE;\n\nif ((a_mat_inv * pos).z < 0.) return NOT_INSIDE;\n\nreturn object(x, y, back);")),
                in_subspace: Normal,
            ),
        ),
        (
            name: "triangle_a0",
            data: Flat(
                kind: Simple(Some(Named("tra0"))),
                is_inside: (("if (show_object_u == 0) return NOT_INSIDE;\n\nif ((a_mat_inv * pos).z < 0.) return NOT_INSIDE;\n\nif ((b0_mat_inv * pos).z > 0.) return NOT_INSIDE;\n\nreturn object(x, y, back);")),
                in_subspace: Normal,
            ),
        ),
        (
            name: "triangle_a1",
            data: Flat(
                kind: Simple(Some(Named("tra1"))),
                is_inside: (("if (show_object_u == 0) return NOT_INSIDE;\n\nif ((a_mat_inv * pos).z < 0.) return NOT_INSIDE;\n\nif ((b0_mat_inv * pos).z > 0.) return NOT_INSIDE;\nif ((b1_mat_inv * pos).z > 0.) return NOT_INSIDE;\n\nreturn object(x, y, back);")),
                in_subspace: Normal,
            ),
        ),
        (
            name: "triangle_a2",
            data: Flat(
                kind: Simple(Some(Named("tra2"))),
                is_inside: (("if (show_object_u == 0) return NOT_INSIDE;\n\nif ((a_mat_inv * pos).z < 0.) return NOT_INSIDE;\n\nif ((b0_mat_inv * pos).z > 0.) return NOT_INSIDE;\nif ((b1_mat_inv * pos).z > 0.) return NOT_INSIDE;\nif ((b2_mat_inv * pos).z > 0.) return NOT_INSIDE;\n\nreturn object(x, y, back);")),
                in_subspace: Normal,
            ),
        ),
        (
            name: "cube",
            data: Complex(
                kind: Simple(Some(Named("cube2"))),
                intersect: (("if (show_cube_u == 0) return scene_intersection_none;\n\nSceneIntersection result = intersect_box(r, room_green_M);\nvec4 pos = r.o + r.d * result.hit.t;\npos = cube2_mat * pos;\n\nif ((a_mat_inv * pos).z < 0.) return scene_intersection_none;\n\nif ((b0_mat_inv * pos).z > 0.) return scene_intersection_none;\n\nreturn result;")),
                in_subspace: Normal,
            ),
        ),
        (
            name: "cube teleported",
            data: Complex(
                kind: Simple(Some(Named("cube_teleported"))),
                intersect: (("if (show_cube_u == 0) return scene_intersection_none;\n\nSceneIntersection result = intersect_box(r, room_green_M);\nvec4 pos = r.o + r.d * result.hit.t;\npos = cube_teleported_mat * pos;\n\nif ((a_mat_inv * pos).z < 0.) return scene_intersection_none;\n\nif ((b0_mat_inv * pos).z > 0.) return scene_intersection_none;\nif ((b1_mat_inv * pos).z > 0.) return scene_intersection_none;\n\nreturn result;")),
                in_subspace: Normal,
            ),
        ),
        (
            name: "third_portal",
            data: Flat(
                kind: Simple(Some(Named("c0"))),
                is_inside: (("int result = is_inside_portal(\n  ellipse_distance(x, y), \n  1., \n  border_size_u,\n  black_border_size_u,\n  portal_violet_M, \n  portal_violet_M, \n  grid_gray_M, \n  grid_gray_M, \n  !back,\n  false\n);\nif (result == TELEPORT) {\n  result = portal_grid_violet_M;\n}\nreturn result;")),
                in_subspace: Normal,
            ),
        ),
        (
            name: "cube_teleported2",
            data: Complex(
                kind: Simple(Some(Inline(Teleport(
                    first_portal: Some(Named("a")),
                    second_portal: Some(Named("c0")),
                    what: Some(Named("cube2")),
                )))),
                intersect: (("if (show_cube_u == 0) return scene_intersection_none;\n\nSceneIntersection result = intersect_box(r, room_green_M);\nvec4 pos = r.o + r.d * result.hit.t;\npos = cube_teleported_mat * pos;\n\n/*if ((a_mat_inv * pos).z < 0.) return scene_intersection_none;\n\nif ((b0_mat_inv * pos).z > 0.) return scene_intersection_none;\nif ((b1_mat_inv * pos).z > 0.) return scene_intersection_none;*/\n\nreturn result;")),
                in_subspace: Normal,
            ),
        ),
    ]),
    cameras: ([
        (
            name: "a",
            data: (
                look_at: MatrixCenter(Some(Named("a"))),
                alpha: -5.794107164726811,
                beta: 0.8981089851558188,
                r: 3.50000000000001,
                in_subspace: false,
                free_movement: false,
                matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
            ),
        ),
        (
            name: "b",
            data: (
                look_at: MatrixCenter(Some(Named("b0"))),
                alpha: -5.794107164726811,
                beta: 0.8981089851558188,
                r: 3.50000000000001,
                in_subspace: false,
                free_movement: false,
                matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
            ),
        ),
    ]),
    textures: ([]),
    materials: ([
        (
            name: "room_yellow",
            data: Simple(
                color: (0.8980392156862745, 0.8313725490196079, 0.25098039215686274),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 1,
                grid_coef: 0.3,
                grid2: false,
                grid3: true,
            ),
        ),
        (
            name: "room_red",
            data: Simple(
                color: (0.9058823529411765, 0.29411764705882354, 0.29411764705882354),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 1,
                grid_coef: 0.3,
                grid2: false,
                grid3: true,
            ),
        ),
        (
            name: "room_black",
            data: Simple(
                color: (0.050980392156862744, 0.050980392156862744, 0.050980392156862744),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 1,
                grid_coef: 0.3,
                grid2: false,
                grid3: true,
            ),
        ),
        (
            name: "room_gray",
            data: Simple(
                color: (0.2235294117647059, 0.2235294117647059, 0.2235294117647059),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 1,
                grid_coef: 0.3,
                grid2: false,
                grid3: true,
            ),
        ),
        (
            name: "room_blue",
            data: Simple(
                color: (0.3137254901960784, 0.38823529411764707, 0.9254901960784314),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 1,
                grid_coef: 0.3,
                grid2: false,
                grid3: true,
            ),
        ),
        (
            name: "room_green",
            data: Simple(
                color: (0.2627450980392157, 0.8470588235294118, 0.30196078431372547),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 1,
                grid_coef: 0.3,
                grid2: false,
                grid3: true,
            ),
        ),
        (
            name: "portal_blue",
            data: Simple(
                color: (0.03529411764705882, 0.6431372549019608, 0.788235294117647),
                normal_coef: 0.5,
                grid: false,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: false,
                grid3: false,
            ),
        ),
        (
            name: "portal_orange",
            data: Simple(
                color: (0.9294117647058824, 0.4235294117647059, 0.050980392156862744),
                normal_coef: 0.5,
                grid: false,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: false,
                grid3: false,
            ),
        ),
        (
            name: "grid_gray",
            data: Simple(
                color: (0.6666666666666666, 0.6666666666666666, 0.6666666666666666),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 5,
                grid_coef: 0.3,
                grid2: false,
                grid3: false,
            ),
        ),
        (
            name: "solid_0",
            data: Simple(
                color: (1, 0.24313725490196078, 0.24313725490196078),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: true,
                grid3: false,
            ),
        ),
        (
            name: "solid_1",
            data: Simple(
                color: (0.24313725490196078, 1, 0.25098039215686274),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: true,
                grid3: false,
            ),
        ),
        (
            name: "solid_2",
            data: Simple(
                color: (0.1843137254901961, 0.19607843137254902, 1),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: true,
                grid3: false,
            ),
        ),
        (
            name: "solid_3",
            data: Simple(
                color: (1, 0.9764705882352941, 0.15294117647058825),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: true,
                grid3: false,
            ),
        ),
        (
            name: "solid_4",
            data: Simple(
                color: (0.7058823529411765, 0.2, 1),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: true,
                grid3: false,
            ),
        ),
        (
            name: "solid_5",
            data: Simple(
                color: (1, 0.1843137254901961, 0.6627450980392157),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: true,
                grid3: false,
            ),
        ),
        (
            name: "solid_6",
            data: Simple(
                color: (1, 0.5176470588235295, 0.08235294117647059),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: true,
                grid3: false,
            ),
        ),
        (
            name: "solid_7",
            data: Simple(
                color: (0.2823529411764706, 0.984313725490196, 0.7333333333333333),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: true,
                grid3: false,
            ),
        ),
        (
            name: "solid_8",
            data: Simple(
                color: (0.5686274509803921, 0.5686274509803921, 0.5686274509803921),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: true,
                grid3: false,
            ),
        ),
        (
            name: "solid_9",
            data: Simple(
                color: (0.14901960784313725, 0.14901960784313725, 0.14901960784313725),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: true,
                grid3: false,
            ),
        ),
        (
            name: "solid_10",
            data: Simple(
                color: (0.011764705882352941, 0.011764705882352941, 0.011764705882352941),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: true,
                grid3: false,
            ),
        ),
        (
            name: "solid_black",
            data: Simple(
                color: (0, 0, 0),
                normal_coef: 0.5,
                grid: false,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: false,
                grid3: false,
            ),
        ),
        (
            name: "solid_white",
            data: Complex(
                code: (("return material_simple(hit, r, vec3(9.176470588235294e-1, 9.176470588235294e-1, 9.176470588235294e-1) * (PI + atan(hit.u, hit.v))/(2.0*PI), 5e-1, false, 4e0, 3e-1);")),
            ),
        ),
        (
            name: "solid_yelreen",
            data: Complex(
                code: (("return material_simple(hit, r, vec3(8.784313725490196e-1, 9.725490196078431e-1, 4.549019607843137e-1) * (PI + atan(hit.u, hit.v))/(2.0*PI), 5e-1, false, 4e0, 3e-1);")),
            ),
        ),
        (
            name: "solid_sqrt",
            data: Simple(
                color: (0.6274509803921569, 0.6274509803921569, 0.6274509803921569),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 20,
                grid_coef: 0.3,
                grid2: true,
                grid3: false,
            ),
        ),
        (
            name: "room_black2",
            data: Simple(
                color: (0.2823529411764706, 0.2823529411764706, 0.2823529411764706),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 1,
                grid_coef: 0.3,
                grid2: false,
                grid3: false,
            ),
        ),
        (
            name: "room_white2",
            data: Simple(
                color: (0.9254901960784314, 0.9254901960784314, 0.9254901960784314),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 1,
                grid_coef: 0.3,
                grid2: false,
                grid3: false,
            ),
        ),
        (
            name: "room_pink",
            data: Simple(
                color: (0.6941176470588235, 0.3607843137254902, 1),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 1.5,
                grid_coef: 0.7,
                grid2: false,
                grid3: false,
            ),
        ),
        (
            name: "portal_violet",
            data: Simple(
                color: (0.6078431372549019, 0.13725490196078433, 0.8392156862745098),
                normal_coef: 0.5,
                grid: false,
                grid_scale: 4,
                grid_coef: 0.3,
                grid2: false,
                grid3: false,
            ),
        ),
        (
            name: "portal_grid_violet",
            data: Simple(
                color: (0.6705882352941176, 0.4549019607843137, 0.8352941176470589),
                normal_coef: 0.5,
                grid: true,
                grid_scale: 5,
                grid_coef: 0.3,
                grid2: false,
                grid3: false,
            ),
        ),
    ]),
    intersection_materials: ([
        (
            name: "portal_in_portal",
            data: ((("Ray r_b = r;\r\nvec4 normal_b = b0_mat * vec4(0., 0., 1., 0.);\r\n\r\nvec3 normal_a = -get_normal(a_mat);\r\nSurfaceIntersection hit_a = plane_intersect(r, a_mat_inv, normal_a);\r\nvec4 pos_a = r.o + r.d * hit_a.t;\r\n\r\nRay r_teleport_a = r;\r\nRay r_teleport_b = r;\r\n\r\nSceneIntersectionWithMaterial result = SceneIntersectionWithMaterial(scene_intersection_none, material_empty());\r\n\r\nfor (int size = 0; size < 50; size++) { if (size >= show_teleported_u) break; // !FOR_NUMBER!\r\nfor (int size = 0; size < show_teleported_u; size++) { // !FOR_VARIABLE!\r\n\tr_teleport_a = transform(b0_mat, transform(a_mat_inv, r_teleport_a));\r\n\tr_teleport_b = transform(a_mat, transform(b0_mat_inv, r_teleport_b));\r\n\r\n\tint material = size;\r\n\tif (material > 10) { material = 10; }\r\n\r\n\tif (nearer(result.scene.hit, hit_a)) {\r\n\t\tint is_inside = is_inside_portal_advanced(pos_a, hit_a.u, hit_a.v, is_collinear(hit_a.n, normal_a), true, size, solid_0_M + material);\r\n\t\tif (is_inside != NOT_INSIDE) {\r\n\t\t\tresult.scene = process_portal_intersection(result.scene, hit_a, is_inside, CUSTOM_MATERIAL);\r\n\t\t\tif (result.scene.material == CUSTOM_MATERIAL) {\r\n\t\t\t\tresult.material = material_teleport_transformed(offset_ray(r_teleport_a, hit_a.t), vec3(1.));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// -----------------------------------------------------------------------\r\n\r\n\tvec3 normal3 = normalize_normal(normal_b.xyz, r.d.xyz);\r\n\tRay r3 = transform(b0_mat_inv, r_b);\r\n\tfloat len = length(r3.d);\r\n\tr3 = normalize_ray(r3);\r\n\r\n\tSurfaceIntersection hit_b = plane_intersect_normalized(r3);\r\n\tif (hit_b.hit) {\r\n\t    hit_b.t /= len;\r\n\t    hit_b.n = normal3;\r\n\t}\r\n\r\n\tif (nearer(result.scene.hit, hit_b)) {\r\n\t\tint is_inside = is_inside_portal_advanced(r.o + r.d * hit_b.t, hit_b.u, hit_b.v, is_collinear(hit_b.n, normal_b.xyz), false, size, solid_0_M + material);\r\n\t\tif (is_inside != NOT_INSIDE) {\r\n\t\t\tresult.scene = process_portal_intersection(result.scene, hit_b, is_inside, CUSTOM_MATERIAL);\r\n\t\t\tif (result.scene.material == CUSTOM_MATERIAL) {\r\n\t\t\t\tresult.material = material_teleport_transformed(offset_ray(r_teleport_b, hit_b.t), vec3(1.));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tr_b = transform(a_mat, transform(b0_mat_inv, r_b));\r\n\tnormal_b = b0_mat * (a_mat_inv * normal_b);\r\n}\r\n\r\nreturn result;\r\n"))),
        ),
    ]),
    library: ([
        (
            name: "room",
            data: (("int is_inside_square(float x, float y, float sizex, float sizey, int material) {\n  if (abs(x) < sizex && abs(y) < sizey) {\n    return material;\n  } else {\n    return NOT_INSIDE;\n  }\n}\n")),
        ),
        (
            name: "portal",
            data: (("float circle_distance(float x, float y) {\n  return sqrt(sqr(x) + sqr(y));\n}\n\nfloat ellipse_distance(float x, float y) {\n  return sqrt(2.*sqr(x) + sqr(y));\n}\n\nfloat square_distance(float x, float y) {\n  return max(abs(x), abs(y));\n}\n\nint is_inside_portal(\n  float distance, \n  float size, \n  float border,\n  float black_border,\n  int material_first, \n  int material_second, \n  int grid_material_first, \n  int grid_material_second, \n  bool back,\n  bool first\n) {\n  int material = material_second;\n  if (first) { material = material_first; }\n\n  if (distance < size) {\n    if (back) {\n      return material;      \n    } else {\n      if (teleport_light_u == 1) {\n        return TELEPORT;\n      } else {\n        if (first) {\n          return grid_material_first;\n        } else {\n          return grid_material_second;\n        }\n      }\n    }\n  }\n  int black_material = solid_black_M;\n  if (_black_border_disable == 1) black_material = material;\n  if (distance < size + black_border && !back) return black_material;\n  if (distance < size + black_border + border) return material;\n  if (distance < size + black_border + border + black_border) return black_material;\n\n  return NOT_INSIDE;\n}\n\nint ellipse_portal(float x, float y, bool back, bool first, int not_teleport_material) {\nfloat distance = 0.;\nif (shape_u == 0) {\n  distance = ellipse_distance(x, y);\n} else if (shape_u == 1) {\n  distance = circle_distance(x, y);\n} else if (shape_u == 2) {\n  distance = square_distance(x, y);\n}\n\nif (double_sided_u == 1) back = false;\n\nint result = is_inside_portal(\n  distance, \n  1., \n  border_size_u,\n  black_border_size_u,\n  portal_orange_M, \n  portal_blue_M, \n  not_teleport_material, \n  not_teleport_material, \n  back,\n  first\n);\n\nif (show_arrow_u == 1 && result == NOT_INSIDE && !first) {\n  float len = 1.7;\n  float x1 = x / arrow_scale_u;\n  float y1 = y / arrow_scale_u;\n  if ((abs(x1) < 0.15 && y1 > 0. && y1 < len) || (y1 < -1.25*abs(x1) + len + 0.5 && y1 > len)) result = solid_black_M;\n}\n\nreturn result;\n}\n\nbool definitely_not_in_portal(float x, float y) {\n  return !(abs(x) < 2.2 && abs(y) < 2.2);\n}")),
        ),
        (
            name: "object",
            data: (("int object(float x, float y, bool back) {\n  float value = sqr(x) + sqr(y);\n  if (value < 1.0) {\n    if (value > sqr(1.0 - 0.07)) return solid_black_M;\n    if (back) {\n      return solid_white_M;\n    } else {\n      return solid_yelreen_M;\n    }\n  }\n  return NOT_INSIDE;\n}")),
        ),
        (
            name: "portal_advanced",
            data: (("int is_inside_portal_advanced(vec4 pos, float x, float y, bool back, bool first, int size, int material) {\r\nif (show_teleported_u < size && !first) return NOT_INSIDE;\r\n\r\nif (definitely_not_in_portal(x, y)) return NOT_INSIDE;\r\n\r\nvec4 pos1 = pos;\r\nif (filter_teleported_u == 1 || first) {\r\n\tif (!first && (a_mat_inv * pos1).z < 0.) return NOT_INSIDE;\r\n\r\n\tvec4 pos2 = pos1;\r\n\tif (first) {\r\n\t\tpos2 = a_mat_inv * (b0_mat * (a_mat_inv * pos2));\r\n\t} else {\r\n\t\tpos2 = b0_mat_inv * pos2;\r\n\t}\r\n\tfor (int i = 0; i < 50; i++) { if (i >= size) break; // !FOR_NUMBER!\r\n    for (int i = 0; i < size; i++) { // !FOR_VARIABLE!\r\n\t\tif (pos2.z > 0.) return NOT_INSIDE;\r\n\t\tif (first) {\r\n\t\t\tpos2 = a_mat_inv * (b0_mat * pos2);\r\n\t\t} else {\r\n\t\t\tpos2 = b0_mat_inv * (a_mat * pos2);\r\n\t\t}\r\n\t}\r\n\tif (first && pos2.z < 0.) return NOT_INSIDE;\r\n}\r\n\r\nreturn ellipse_portal(x, y, back, first, material);\r\n}")),
        ),
        (
            name: "box",
            data: (("SceneIntersection intersect_box(Ray r, int material) {\r\nvec3 rad = vec3(4., 4., 4.);\r\nvec3 m = 1.0/r.d.xyz;\r\nvec3 n = m*r.o.xyz;\r\nvec3 k = abs(m)*rad;\r\nvec3 t1 = -n - k;\r\nvec3 t2 = -n + k;\r\n\r\nfloat tN = max( max( t1.x, t1.y ), t1.z );\r\nfloat tF = min( min( t2.x, t2.y ), t2.z );\r\n\r\nfloat t = tN;\r\nif (tN < 0.0 && tF > 0.0) t = tF;\r\n\r\nif(tN > tF) return scene_intersection_none;\r\n\r\nif(t < 0.0) return scene_intersection_none;\r\n\r\nvec3 oN = -sign(r.d.xyz)*step(t1.yzx,t1.xyz)*step(t1.zxy,t1.xyz);\r\n\r\nvec3 pos = (r.o + r.d * t).xyz;\r\n\r\nvec2 uv = vec2(pos.x, pos.y);\r\nif (abs(abs(pos.x) - rad.x) < 0.0001) {\r\n  uv = vec2(pos.y, pos.z);\r\n}\r\nif (abs(abs(pos.y) - rad.y) < 0.0001) {\r\n  uv = vec2(pos.x, pos.z);\r\n}\r\n\r\nreturn SceneIntersection(material, SurfaceIntersection(true, t, uv.x, uv.y, normalize_normal(r.d.xyz, oN)), false);\r\n}\r\n")),
        ),
    ]),
    animations_filters: (
        uniforms: {
            "arrow_scale": true,
            "black_border_size": true,
            "border_size": true,
            "cube_position": true,
            "cube_scale": true,
            "double_sided": true,
            "filter_teleported": true,
            "gray_room": true,
            "pass_angle": true,
            "pass_not_disable_orange_portal": true,
            "pass_offset": true,
            "pass_progress": true,
            "pass_scale": true,
            "pass_use_teleported_matrix": true,
            "portal_scale": true,
            "progress": true,
            "progress_2": true,
            "room_size_x": false,
            "room_size_y": false,
            "room_size_z": false,
            "shape": true,
            "show_arrow": true,
            "show_cube": true,
            "show_object": true,
            "show_teleported": true,
            "speed": true,
            "teleport_light": true,
            "tr_x": true,
            "tr_y": true,
            "tr_z": true,
            "violet_progress": true,
        },
        matrices: {
            "a": true,
            "b0": true,
            "b1": false,
            "b2": false,
            "b_pass": false,
            "b_pass_on_a": false,
            "b_pic4": false,
            "c0": false,
            "cube": true,
            "cube2": false,
            "cube_teleported": false,
            "empty": false,
            "room_origin": false,
            "tr": true,
            "tra0": false,
            "tra1": false,
            "tra2": false,
        },
        cameras: {
            "a": true,
            "b": true,
        },
    ),
    elements_descriptions: (
        uniforms: {
            "arrow_scale": (
                help_description: None,
                overrided_name: "Arrow scale",
            ),
            "black_border_size": (
                help_description: None,
                overrided_name: "Black border size",
            ),
            "border_size": (
                help_description: None,
                overrided_name: "Border size",
            ),
            "cube_position": (
                help_description: None,
                overrided_name: "Cube position",
            ),
            "cube_scale": (
                help_description: None,
                overrided_name: "Cube scale",
            ),
            "double_sided": (
                help_description: None,
                overrided_name: "Double-sided",
            ),
            "filter_teleported": (
                help_description: None,
                overrided_name: "Filter not teleported parts",
            ),
            "gray_room": (
                help_description: None,
                overrided_name: "Gray room",
            ),
            "pass_angle": (
                help_description: None,
                overrided_name: "Angle",
            ),
            "pass_not_disable_orange_portal": (
                help_description: None,
                overrided_name: "Not disable orange portal",
            ),
            "pass_offset": (
                help_description: None,
                overrided_name: "Offset",
            ),
            "pass_progress": (
                help_description: None,
                overrided_name: "Progress",
            ),
            "pass_scale": (
                help_description: None,
                overrided_name: "Scale",
            ),
            "pass_use_teleported_matrix": (
                help_description: None,
                overrided_name: "Use teleported matrix",
            ),
            "portal_scale": (
                help_description: None,
                overrided_name: "Portal scale",
            ),
            "progress": (
                help_description: None,
                overrided_name: "Progress",
            ),
            "progress_2": (
                help_description: None,
                overrided_name: "Progress 2",
            ),
            "shape": (
                help_description: None,
                overrided_name: "Portal shape",
            ),
            "show_arrow": (
                help_description: None,
                overrided_name: "Show arrow",
            ),
            "show_cube": (
                help_description: None,
                overrided_name: "Show cube",
            ),
            "show_object": (
                help_description: None,
                overrided_name: "",
            ),
            "show_teleported": (
                help_description: None,
                overrided_name: "Teleported parts count",
            ),
            "speed": (
                help_description: None,
                overrided_name: "Speed",
            ),
            "teleport_light": (
                help_description: None,
                overrided_name: "Teleport light",
            ),
            "tr_x": (
                help_description: None,
                overrided_name: "X",
            ),
            "tr_y": (
                help_description: None,
                overrided_name: "Y",
            ),
            "tr_z": (
                help_description: None,
                overrided_name: "Z",
            ),
            "violet_progress": (
                help_description: None,
                overrided_name: "Violet scale",
            ),
        },
        matrices: {
            "a": (
                help_description: None,
                overrided_name: "",
            ),
            "b0": (
                help_description: None,
                overrided_name: "Blue portal",
            ),
            "cube": (
                help_description: None,
                overrided_name: "Cube",
            ),
            "tr": (
                help_description: None,
                overrided_name: "",
            ),
        },
        cameras: {
            "a": (
                help_description: None,
                overrided_name: "Orange portal",
            ),
            "b": (
                help_description: None,
                overrided_name: "Blue portal",
            ),
        },
    ),
    user_uniforms: (
        uniforms: {
            "arrow_scale": false,
            "black_border_size": false,
            "border_size": false,
            "cube_position": false,
            "cube_scale": false,
            "double_sided": true,
            "filter_teleported": true,
            "gray_room": true,
            "pass_angle": false,
            "pass_not_disable_orange_portal": false,
            "pass_offset": false,
            "pass_progress": false,
            "pass_scale": false,
            "pass_use_teleported_matrix": false,
            "portal_scale": false,
            "progress": false,
            "progress_2": false,
            "room_size_x": false,
            "room_size_y": false,
            "room_size_z": false,
            "shape": true,
            "show_arrow": false,
            "show_cube": false,
            "show_object": false,
            "show_teleported": true,
            "speed": false,
            "teleport_light": true,
            "tr_x": false,
            "tr_y": false,
            "tr_z": false,
            "violet_progress": false,
        },
        matrices: {
            "a": false,
            "b0": false,
            "b1": false,
            "b2": false,
            "b_pass": false,
            "b_pass_on_a": false,
            "b_pic4": false,
            "c0": false,
            "cube": false,
            "cube2": false,
            "cube_teleported": false,
            "empty": false,
            "room_origin": false,
            "tr": false,
            "tra0": false,
            "tra1": false,
            "tra2": false,
        },
    ),
    animation_stages: ([
        (
            name: "how",
            data: (
                name: (
                    eng: "How",
                    rus: "Как",
                ),
                description: None,
                uniforms: {
                    "arrow_scale": FromDev,
                    "black_border_size": FromDev,
                    "border_size": FromDev,
                    "filter_teleported": FromDev,
                    "gray_room": FromDev,
                    "pass_angle": FromDev,
                    "pass_not_disable_orange_portal": FromDev,
                    "pass_offset": FromDev,
                    "pass_progress": FromDev,
                    "pass_scale": FromDev,
                    "pass_use_teleported_matrix": FromDev,
                    "progress": ProvidedToUser,
                    "progress_2": FromDev,
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "shape": FromDev,
                    "show_arrow": FromDev,
                    "show_cube": FromDev,
                    "show_object": FromDev,
                    "show_teleported": FromDev,
                    "speed": FromDev,
                    "teleport_light": FromDev,
                    "tr_x": FromDev,
                    "tr_y": FromDev,
                    "tr_z": FromDev,
                },
                matrices: {
                    "?": FromDev,
                    "a": FromDev,
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Value(0),
                            z: Uniform(Some(Inline(Formula(("1 - progress * 1.73"))))),
                        ),
                        rotate: (
                            x: Uniform(Some(Inline(Formula(("deg2rad(-90) * min(progress, 0.5) / 0.5"))))),
                            y: Uniform(Some(Inline(Formula(("deg2rad(-90) * min(progress, 0.5) / 0.5"))))),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    )))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pass": FromDev,
                    "b_pass_on_a": FromDev,
                    "b_pic4": FromDev,
                    "cube": FromDev,
                    "cube2": FromDev,
                    "cube_teleported": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": FromDev,
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: None,
                cams: {
                    "a": false,
                    "b": false,
                },
                hidden: false,
            ),
        ),
        (
            name: "explore",
            data: (
                name: (
                    eng: "Explore",
                    rus: "Исследуй",
                ),
                description: None,
                uniforms: {
                    "arrow_scale": ProvidedToUser,
                    "black_border_size": FromDev,
                    "border_size": FromDev,
                    "filter_teleported": FromDev,
                    "gray_room": FromDev,
                    "pass_angle": FromDev,
                    "pass_not_disable_orange_portal": FromDev,
                    "pass_offset": FromDev,
                    "pass_progress": FromDev,
                    "pass_scale": FromDev,
                    "pass_use_teleported_matrix": FromDev,
                    "progress": FromDev,
                    "progress_2": FromDev,
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "shape": FromDev,
                    "show_arrow": ProvidedToUser,
                    "show_cube": FromDev,
                    "show_object": FromDev,
                    "show_teleported": FromDev,
                    "speed": FromDev,
                    "teleport_light": FromDev,
                    "tr_x": FromDev,
                    "tr_y": FromDev,
                    "tr_z": FromDev,
                },
                matrices: {
                    "?": FromDev,
                    "a": Changed(Some(Inline(Simple(
                        offset: (0, 0, 0),
                        scale: 1,
                        rotate: (0, 0, 0),
                        mirror: (false, false, false),
                    )))),
                    "b0": ChangedAndToUser(Some(Inline(Simple(
                        offset: (0, 0, 0.27),
                        scale: 1,
                        rotate: (4.71238898038469, 4.71238898038469, 0),
                        mirror: (false, false, false),
                    )))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pass": FromDev,
                    "b_pass_on_a": FromDev,
                    "b_pic4": FromDev,
                    "cube": FromDev,
                    "cube2": FromDev,
                    "cube_teleported": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": FromDev,
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: None,
                cams: {
                    "a": true,
                    "b": true,
                },
                hidden: false,
            ),
        ),
        (
            name: "with object",
            data: (
                name: (
                    eng: "With object",
                    rus: "С объектом",
                ),
                description: Some((
                    eng: "There showed how object behave whene teleported by portal in portal. There is nothing special in this configuration, object will not be duplicated.\n\nYou should try disable \"Teleport light\" option and see that object is always alone, it just cutted in parts.",
                    rus: "Здесь показано как поведёт себя объект, который поместили в портал в портале. Видно, что ничего особенного не произойдёт, данный объект будет просто телепортирован, и не будет дублирован.\n\nОбязательно попробуйте сделать это с выключенной опцией \"Teleport light\", так вы убедитесь что объект всегда один, просто он разделяется на части.",
                )),
                uniforms: {
                    "arrow_scale": FromDev,
                    "black_border_size": FromDev,
                    "border_size": FromDev,
                    "cube_position": FromDev,
                    "cube_scale": FromDev,
                    "filter_teleported": FromDev,
                    "gray_room": FromDev,
                    "pass_angle": FromDev,
                    "pass_not_disable_orange_portal": FromDev,
                    "pass_offset": FromDev,
                    "pass_progress": FromDev,
                    "pass_scale": FromDev,
                    "pass_use_teleported_matrix": FromDev,
                    "portal_scale": FromDev,
                    "progress": FromDev,
                    "progress_2": FromDev,
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "shape": FromDev,
                    "show_arrow": FromDev,
                    "show_cube": FromDev,
                    "show_object": Changed(Some(Inline(Bool(true)))),
                    "show_teleported": FromDev,
                    "speed": FromDev,
                    "teleport_light": FromDev,
                    "tr_x": ProvidedToUser,
                    "tr_y": ProvidedToUser,
                    "tr_z": ProvidedToUser,
                    "violet_progress": FromDev,
                },
                matrices: {
                    "?": FromDev,
                    "a": Changed(Some(Inline(Simple(
                        offset: (0, 0, 0),
                        scale: 1,
                        rotate: (0, 0, 0),
                        mirror: (false, false, false),
                    )))),
                    "b0": Changed(Some(Inline(Simple(
                        offset: (0, 0, 0.27),
                        scale: 1,
                        rotate: (4.71238898038469, 4.71238898038469, 0),
                        mirror: (false, false, false),
                    )))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pass": FromDev,
                    "b_pass_on_a": FromDev,
                    "b_pic4": FromDev,
                    "c0": FromDev,
                    "cube": FromDev,
                    "cube2": FromDev,
                    "cube_teleported": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Uniform(Some(Inline(Formula(("0.12+tr_x*0.4"))))),
                            y: Uniform(Some(Inline(Formula(("0.05+tr_y*0.6"))))),
                            z: Uniform(Some(Inline(Formula(("tr_z*0.15"))))),
                        ),
                        rotate: (
                            x: Value(1.5707963267948966),
                            y: Value(0),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(0.1),
                    )))),
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: Some(Some(Inline((
                    look_at: Coordinate((0.1, 0.1, 0.1)),
                    alpha: -12.002329107909647,
                    beta: 0.7903495330214368,
                    r: 1.4876033057851326,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                )))),
                cams: {
                    "a": false,
                    "b": false,
                },
                hidden: false,
            ),
        ),
        (
            name: "picture 1",
            data: (
                name: (
                    eng: "Picture 1",
                    rus: "Картинка 1",
                ),
                description: None,
                uniforms: {
                    "filter_teleported": FromDev,
                    "progress": FromDev,
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "show_object": FromDev,
                    "show_teleported": FromDev,
                    "speed": FromDev,
                    "teleport_light": FromDev,
                    "tr_x": FromDev,
                    "tr_y": FromDev,
                    "tr_z": FromDev,
                },
                matrices: {
                    "?": FromDev,
                    "a": Changed(Some(Inline(Simple(
                        offset: (0, 0, 0),
                        scale: 1,
                        rotate: (0, 0, 0),
                        mirror: (false, false, false),
                    )))),
                    "b0": ChangedAndToUser(Some(Inline(Simple(
                        offset: (0, 0, 0.27),
                        scale: 1,
                        rotate: (4.71238898038469, 4.71238898038469, 0),
                        mirror: (false, false, false),
                    )))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pic4": FromDev,
                    "cube": FromDev,
                    "cube2": FromDev,
                    "cube_teleported": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": FromDev,
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: Some(Some(Inline((
                    look_at: Coordinate((0.14, 0.14, 0.135)),
                    alpha: -13.361797514201355,
                    beta: 0.845608892008663,
                    r: 0.048017242074020104,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                )))),
                cams: {
                    "a": false,
                    "b": false,
                },
                hidden: false,
            ),
        ),
        (
            name: "picture 2",
            data: (
                name: (
                    eng: "Picture 2",
                    rus: "Картинка 2",
                ),
                description: None,
                uniforms: {
                    "filter_teleported": FromDev,
                    "progress": FromDev,
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "show_object": FromDev,
                    "show_teleported": FromDev,
                    "speed": FromDev,
                    "teleport_light": FromDev,
                    "tr_x": FromDev,
                    "tr_y": FromDev,
                    "tr_z": FromDev,
                },
                matrices: {
                    "?": FromDev,
                    "a": Changed(Some(Inline(Simple(
                        offset: (0, 0, 0),
                        scale: 1,
                        rotate: (0, 0, 0),
                        mirror: (false, false, false),
                    )))),
                    "b0": ChangedAndToUser(Some(Inline(Simple(
                        offset: (0, 0, 0.24),
                        scale: 1,
                        rotate: (0.2792526803190927, 0, 0),
                        mirror: (false, false, false),
                    )))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pic4": FromDev,
                    "cube": FromDev,
                    "cube2": FromDev,
                    "cube_teleported": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": FromDev,
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: Some(Some(Inline((
                    look_at: Coordinate((0, 0, 0.135)),
                    alpha: -12.511239557476001,
                    beta: 0.01,
                    r: 0.07733224853263031,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                )))),
                cams: {
                    "a": false,
                    "b": false,
                },
                hidden: false,
            ),
        ),
        (
            name: "picture 3",
            data: (
                name: (
                    eng: "Picture 3",
                    rus: "Картинка 3",
                ),
                description: None,
                uniforms: {
                    "black_border_size": FromDev,
                    "border_size": FromDev,
                    "filter_teleported": FromDev,
                    "pass_angle": FromDev,
                    "pass_not_disable_orange_portal": FromDev,
                    "pass_offset": FromDev,
                    "pass_progress": FromDev,
                    "pass_scale": FromDev,
                    "pass_use_teleported_matrix": FromDev,
                    "progress": FromDev,
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "shape": FromDev,
                    "show_object": FromDev,
                    "show_teleported": FromDev,
                    "speed": FromDev,
                    "teleport_light": FromDev,
                    "tr_x": FromDev,
                    "tr_y": FromDev,
                    "tr_z": FromDev,
                },
                matrices: {
                    "?": FromDev,
                    "a": Changed(Some(Inline(Simple(
                        offset: (0, 0, 0),
                        scale: 1,
                        rotate: (0, 0, 0),
                        mirror: (false, false, false),
                    )))),
                    "b0": ChangedAndToUser(Some(Inline(Simple(
                        offset: (0, 0.16, 0.31),
                        scale: 1,
                        rotate: (4.71238898038469, 5.427973973702365, 0),
                        mirror: (false, false, false),
                    )))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pass": FromDev,
                    "b_pass_on_a": FromDev,
                    "b_pic4": FromDev,
                    "cube": FromDev,
                    "cube2": FromDev,
                    "cube_teleported": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": FromDev,
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: Some(Some(Inline((
                    look_at: Coordinate((0, 0, 0)),
                    alpha: -18.37206727166386,
                    beta: 0.8583911349773405,
                    r: 2.395800000000002,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                )))),
                cams: {
                    "a": false,
                    "b": false,
                },
                hidden: false,
            ),
        ),
        (
            name: "picture 4",
            data: (
                name: (
                    eng: "Picture 4",
                    rus: "Картинка 4",
                ),
                description: Some((
                    eng: "For the sake of this picture, I completely rewrote the way this portal-in-portal scene works, and made a dynamic calculation of teleportation degrees, so now you can set an infinite number of them.\n\nThe peculiarity of this portals position is that in the center the picture breaks, and it requires very many degrees of teleportation to fix. You can customize this in the slider above. I did about 2000 degrees of teleportation, but there was a very small piece that wouldn\'t disappear. It seems it would disappear at a degree of teleportation tending to infinity.\n\nAs it turned out, for flat portals, as long as they do not change scale and do not touch each other\'s boundary, my model with flat teleportation degrees works.",
                    rus: "Ради этой картинки я полностью переписал то как работает данная сцена с порталом в портале, и сделал динамическое вычисление степеней телепортации, благодаря чему теперь можно задать их бесконечное количество.\n\nОсобенность этой позиции порталов в том что в центре ломается картинка, и она требует очень много степеней телепортации чтобы починиться. Можете настраивать это в слайдере выше. При этом я делал около 2000 степеней телепортации, но оставался очень маленький кусочек, который не исчезал. Кажется он исчезнет при степени телепортации, стремящейся к бесконечности.\n\nКак оказалось, для плоских порталов, до тех пор пока они не изменяют масштаб и не касаются границы друг друга, моя модель с плоскими степенями телепортации работает.",
                )),
                uniforms: {
                    "black_border_size": FromDev,
                    "border_size": FromDev,
                    "filter_teleported": FromDev,
                    "pass_angle": FromDev,
                    "pass_not_disable_orange_portal": FromDev,
                    "pass_offset": FromDev,
                    "pass_progress": FromDev,
                    "pass_scale": FromDev,
                    "pass_use_teleported_matrix": FromDev,
                    "progress": FromDev,
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "shape": FromDev,
                    "show_object": FromDev,
                    "show_teleported": FromDev,
                    "speed": FromDev,
                    "teleport_light": FromDev,
                    "tr_x": FromDev,
                    "tr_y": FromDev,
                    "tr_z": FromDev,
                },
                matrices: {
                    "a": Changed(Some(Named("empty"))),
                    "b0": ChangedAndToUser(Some(Named("b_pic4"))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pass": FromDev,
                    "b_pass_on_a": FromDev,
                    "b_pic4": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": FromDev,
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: Some(Some(Inline((
                    look_at: Coordinate((0, 0, 0)),
                    alpha: 1.5248612669984203,
                    beta: 1.552509937286378,
                    r: 1.9756587551882454,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                )))),
                cams: {
                    "a": false,
                    "b": false,
                },
                hidden: false,
            ),
        ),
        (
            name: "animation 1",
            data: (
                name: (
                    eng: "Animation 1",
                    rus: "Анимация 1",
                ),
                description: None,
                uniforms: {
                    "filter_teleported": FromDev,
                    "progress": Changed(Some(Inline(Formula(("((time * speed) % 1) * 2 * pi()"))))),
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "show_object": FromDev,
                    "show_teleported": FromDev,
                    "speed": ProvidedToUser,
                    "teleport_light": FromDev,
                    "tr_x": FromDev,
                    "tr_y": FromDev,
                    "tr_z": FromDev,
                },
                matrices: {
                    "?": FromDev,
                    "a": Changed(Some(Inline(Simple(
                        offset: (0, 0, 0),
                        scale: 1,
                        rotate: (0, 0, 0),
                        mirror: (false, false, false),
                    )))),
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0.32),
                        ),
                        rotate: (
                            x: Value(0),
                            y: Value(4.71238898038469),
                            z: Uniform(Some(Inline(Formula(("pi()/2 + progress"))))),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    )))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pic4": FromDev,
                    "cube": FromDev,
                    "cube2": FromDev,
                    "cube_teleported": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": FromDev,
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: Some(Some(Inline((
                    look_at: Coordinate((0, 0, 0)),
                    alpha: -12.165700075225216,
                    beta: 0.8745012875795398,
                    r: 1.9756587551882376,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                )))),
                cams: {
                    "a": false,
                    "b": false,
                },
                hidden: false,
            ),
        ),
        (
            name: "animation 2",
            data: (
                name: (
                    eng: "Animation 2",
                    rus: "Анимация 2",
                ),
                description: None,
                uniforms: {
                    "filter_teleported": FromDev,
                    "progress": Changed(Some(Inline(Formula(("((time * speed) % 1) * 2 * pi()"))))),
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "show_object": FromDev,
                    "show_teleported": FromDev,
                    "speed": ProvidedToUser,
                    "teleport_light": FromDev,
                    "tr_x": FromDev,
                    "tr_y": FromDev,
                    "tr_z": FromDev,
                },
                matrices: {
                    "?": FromDev,
                    "a": Changed(Some(Inline(Simple(
                        offset: (0, 0, 0),
                        scale: 1,
                        rotate: (0, 0, 0),
                        mirror: (false, false, false),
                    )))),
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0.24),
                        ),
                        rotate: (
                            x: Uniform(Some(Named("progress"))),
                            y: Value(0),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    )))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pic4": FromDev,
                    "cube": FromDev,
                    "cube2": FromDev,
                    "cube_teleported": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": FromDev,
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: Some(Some(Inline((
                    look_at: Coordinate((0, 0, 0)),
                    alpha: -12.355556990907772,
                    beta: 1.2000013870894954,
                    r: 1.9756587551882376,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                )))),
                cams: {
                    "a": false,
                    "b": false,
                },
                hidden: false,
            ),
        ),
        (
            name: "explanation 1",
            data: (
                name: (
                    eng: "Explanation 1",
                    rus: "Объяснение 1",
                ),
                description: None,
                uniforms: {
                    "arrow_scale": FromDev,
                    "black_border_size": FromDev,
                    "border_size": FromDev,
                    "cube_position": FromDev,
                    "cube_scale": FromDev,
                    "filter_teleported": FromDev,
                    "gray_room": FromDev,
                    "pass_angle": FromDev,
                    "pass_not_disable_orange_portal": FromDev,
                    "pass_offset": FromDev,
                    "pass_progress": FromDev,
                    "pass_scale": FromDev,
                    "pass_use_teleported_matrix": FromDev,
                    "portal_scale": FromDev,
                    "progress": ProvidedToUser,
                    "progress_2": FromDev,
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "shape": FromDev,
                    "show_arrow": FromDev,
                    "show_cube": FromDev,
                    "show_object": FromDev,
                    "show_teleported": FromDev,
                    "speed": FromDev,
                    "teleport_light": FromDev,
                    "tr_x": FromDev,
                    "tr_y": FromDev,
                    "tr_z": FromDev,
                    "violet_progress": FromDev,
                },
                matrices: {
                    "?": FromDev,
                    "a": Changed(Some(Inline(Simple(
                        offset: (0, 0, 0),
                        scale: 1,
                        rotate: (0, 0, 0),
                        mirror: (false, false, false),
                    )))),
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Value(0),
                            z: Uniform(Some(Inline(Formula(("0.58 + (1.05 - 0.58) * inv(progress)"))))),
                        ),
                        rotate: (
                            x: Value(4.71238898038469),
                            y: Value(4.71238898038469),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    )))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pass": FromDev,
                    "b_pass_on_a": FromDev,
                    "b_pic4": FromDev,
                    "c0": FromDev,
                    "cube": FromDev,
                    "cube2": FromDev,
                    "cube_teleported": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": FromDev,
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: None,
                cams: {
                    "a": false,
                    "b": false,
                },
                hidden: true,
            ),
        ),
        (
            name: "explanation 2",
            data: (
                name: (
                    eng: "Explanation 2",
                    rus: "Объяснение 2",
                ),
                description: None,
                uniforms: {
                    "arrow_scale": FromDev,
                    "black_border_size": FromDev,
                    "border_size": FromDev,
                    "cube_position": FromDev,
                    "cube_scale": FromDev,
                    "filter_teleported": FromDev,
                    "gray_room": FromDev,
                    "pass_angle": FromDev,
                    "pass_not_disable_orange_portal": FromDev,
                    "pass_offset": FromDev,
                    "pass_progress": FromDev,
                    "pass_scale": FromDev,
                    "pass_use_teleported_matrix": FromDev,
                    "portal_scale": FromDev,
                    "progress": ProvidedToUser,
                    "progress_2": FromDev,
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "shape": FromDev,
                    "show_arrow": FromDev,
                    "show_cube": FromDev,
                    "show_object": FromDev,
                    "show_teleported": FromDev,
                    "speed": FromDev,
                    "teleport_light": FromDev,
                    "tr_x": FromDev,
                    "tr_y": FromDev,
                    "tr_z": FromDev,
                    "violet_progress": FromDev,
                },
                matrices: {
                    "?": FromDev,
                    "a": Changed(Some(Inline(Simple(
                        offset: (0, 0, 0),
                        scale: 1,
                        rotate: (0, 0, 0),
                        mirror: (false, false, false),
                    )))),
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Value(0),
                            z: Uniform(Some(Inline(Formula(("0.27 + (0.58 - 0.27) * inv(progress)"))))),
                        ),
                        rotate: (
                            x: Value(4.71238898038469),
                            y: Value(4.71238898038469),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    )))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pass": FromDev,
                    "b_pass_on_a": FromDev,
                    "b_pic4": FromDev,
                    "c0": FromDev,
                    "cube": FromDev,
                    "cube2": FromDev,
                    "cube_teleported": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": FromDev,
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: None,
                cams: {
                    "a": false,
                    "b": false,
                },
                hidden: true,
            ),
        ),
        (
            name: "Portal pass through",
            data: (
                name: (
                    eng: "Portal pass through",
                    rus: "Портал проходит сквозь себя",
                ),
                description: Some((
                    eng: "Answer to the question \"is it possible to conduct a portal through yourself?\". Answer [provided by Azai](https://twitter.com/optozorax/status/1391782684498800642).\n\nBoundaries are disabled here, because otherwise it won\'t work.\n\nI don\'t know is this correct or not, I\'m still doubting.",
                    rus: "Ответ к вопросу \"возможно ли провести портал через самого себя?\". Ответ [предоставил Azai](https://twitter.com/optozorax/status/1391782684498800642).\n\nЗдесь отключены границы, потому что иначе это не будет работать.\n\nЯ не знаю правильно это или нет, до сих пор сомневаюсь.",
                )),
                uniforms: {
                    "arrow_scale": FromDev,
                    "black_border_size": Changed(Some(Inline(Formula(("0"))))),
                    "border_size": Changed(Some(Inline(Formula(("0"))))),
                    "cube_position": FromDev,
                    "cube_scale": FromDev,
                    "filter_teleported": FromDev,
                    "gray_room": FromDev,
                    "pass_angle": ChangedAndToUser(Some(Inline(Angle(0.7853981633974483)))),
                    "pass_not_disable_orange_portal": FromDev,
                    "pass_offset": FromDev,
                    "pass_progress": ProvidedToUser,
                    "pass_scale": FromDev,
                    "pass_use_teleported_matrix": FromDev,
                    "portal_scale": FromDev,
                    "progress": FromDev,
                    "progress_2": FromDev,
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "shape": FromDev,
                    "show_arrow": FromDev,
                    "show_cube": FromDev,
                    "show_object": FromDev,
                    "show_teleported": FromDev,
                    "speed": FromDev,
                    "teleport_light": FromDev,
                    "tr_x": FromDev,
                    "tr_y": FromDev,
                    "tr_z": FromDev,
                    "violet_progress": FromDev,
                },
                matrices: {
                    "?": FromDev,
                    "a": Changed(Some(Inline(Simple(
                        offset: (0, 0, 0),
                        scale: 1,
                        rotate: (0, 0, 0),
                        mirror: (false, false, false),
                    )))),
                    "b0": Changed(Some(Named("b_pass_on_a"))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pass": FromDev,
                    "b_pass_on_a": FromDev,
                    "b_pic4": FromDev,
                    "c0": FromDev,
                    "cube": FromDev,
                    "cube2": FromDev,
                    "cube_teleported": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": FromDev,
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: None,
                cams: {
                    "a": false,
                    "b": false,
                },
                hidden: true,
            ),
        ),
        (
            name: "Portal pass through explore",
            data: (
                name: (
                    eng: "Portal pass through, explore",
                    rus: "Портал проходит сквозь себя, исследование",
                ),
                description: Some((
                    eng: "This scene will give you a better understanding of what is happening in the previous scene.\n\nTry turning off teleportation degree filtering and light teleportation to see the colors, and then click the \"use teleported matrix\" checkbox.\n\nI don\'t really want to explain anything here as I don\'t fully understand it myself yet.\n\nSo far from this I realized that we have two options:\n1. There must always be a teleportation degree of -1 (which is the square root of the blue portal matrix). But it\'s not clear about teleportation degrees -2 (cube root?), etc.\n2. The portal (green) coming out of the portal is not a normal portal (red), because somewhere inside there is a red degree of teleportation that cannot be obtained normally. You can figure this out by toggling the \"use teleported matrix\" checkbox.",
                    rus: "Эта сцена позволит вам лучше понять что происходит  в предыдущей сцене.\n\nПопробуйте выключить фильтрацию степеней телепортации и телепортацию света, чтобы видеть цвета, а затем покликать галочку \"use teleported matrix\".\n\nНе особо хочу тут что-то объяснять, так как сам ещё не до конца понимаю.\n\nПока что из этого я понял что у нас есть два варианта:\n1. Всегда должна существовать степень телепортации -1 (которая является квадратным корнем от матрицы синего портала). Но не понятно насчёт степеней телепортации -2 (кубический корень?) итд.\n2. Портал (зелёный), выходящий из портала, не является обычным порталом (красным), потому что где-то внутри есть красная степень телепортации, которую нельзя получить обычным образом. Это можно понять, переключая галочку \"use teleported matrix\".",
                )),
                uniforms: {
                    "arrow_scale": FromDev,
                    "black_border_size": ChangedAndToUser(Some(Inline(Float((
                        min: Some(0),
                        max: Some(0.1),
                        value: 0.01,
                    ))))),
                    "border_size": ChangedAndToUser(Some(Inline(Float((
                        min: Some(0),
                        max: Some(0.1),
                        value: 0.035,
                    ))))),
                    "cube_position": FromDev,
                    "cube_scale": FromDev,
                    "filter_teleported": FromDev,
                    "gray_room": FromDev,
                    "pass_angle": ProvidedToUser,
                    "pass_not_disable_orange_portal": ProvidedToUser,
                    "pass_offset": ProvidedToUser,
                    "pass_progress": ProvidedToUser,
                    "pass_scale": ProvidedToUser,
                    "pass_use_teleported_matrix": ProvidedToUser,
                    "portal_scale": FromDev,
                    "progress": FromDev,
                    "progress_2": FromDev,
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "shape": FromDev,
                    "show_arrow": FromDev,
                    "show_cube": FromDev,
                    "show_object": FromDev,
                    "show_teleported": FromDev,
                    "speed": FromDev,
                    "teleport_light": FromDev,
                    "tr_x": FromDev,
                    "tr_y": FromDev,
                    "tr_z": FromDev,
                    "violet_progress": FromDev,
                },
                matrices: {
                    "?": FromDev,
                    "a": Changed(Some(Inline(Simple(
                        offset: (0, 0, 0),
                        scale: 1,
                        rotate: (0, 0, 0),
                        mirror: (false, false, false),
                    )))),
                    "b0": Changed(Some(Inline(If(
                        condition: Uniform(Some(Named("pass_use_teleported_matrix"))),
                        then: Some(Inline(Teleport(
                            first_portal: Some(Named("a")),
                            second_portal: Some(Named("b_pass_on_a")),
                            what: Some(Named("b_pass_on_a")),
                        ))),
                        otherwise: Some(Named("b_pass_on_a")),
                    )))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pass": FromDev,
                    "b_pass_on_a": FromDev,
                    "b_pic4": FromDev,
                    "c0": FromDev,
                    "cube": FromDev,
                    "cube2": FromDev,
                    "cube_teleported": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": FromDev,
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: None,
                cams: {
                    "a": false,
                    "b": false,
                },
                hidden: true,
            ),
        ),
        (
            name: "with cube",
            data: (
                name: (
                    eng: "With cube",
                    rus: "With cube",
                ),
                description: None,
                uniforms: {
                    "arrow_scale": FromDev,
                    "black_border_size": FromDev,
                    "border_size": FromDev,
                    "cube_position": FromDev,
                    "cube_scale": FromDev,
                    "filter_teleported": FromDev,
                    "gray_room": FromDev,
                    "pass_angle": FromDev,
                    "pass_not_disable_orange_portal": FromDev,
                    "pass_offset": FromDev,
                    "pass_progress": FromDev,
                    "pass_scale": FromDev,
                    "pass_use_teleported_matrix": FromDev,
                    "portal_scale": FromDev,
                    "progress": FromDev,
                    "progress_2": FromDev,
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "shape": FromDev,
                    "show_arrow": FromDev,
                    "show_cube": Changed(Some(Inline(Bool(true)))),
                    "show_object": FromDev,
                    "show_teleported": FromDev,
                    "speed": FromDev,
                    "teleport_light": FromDev,
                    "tr_x": FromDev,
                    "tr_y": FromDev,
                    "tr_z": FromDev,
                    "violet_progress": FromDev,
                },
                matrices: {
                    "a": FromDev,
                    "b0": Changed(Some(Inline(Simple(
                        offset: (0, 0, 1),
                        scale: 1,
                        rotate: (0, 0, 0),
                        mirror: (false, false, false),
                    )))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pass": FromDev,
                    "b_pass_on_a": FromDev,
                    "b_pic4": FromDev,
                    "c0": FromDev,
                    "cube": ProvidedToUser,
                    "cube2": FromDev,
                    "cube_teleported": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": FromDev,
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: None,
                cams: {
                    "a": false,
                    "b": false,
                },
                hidden: true,
            ),
        ),
        (
            name: "How 2",
            data: (
                name: (
                    eng: "How 2",
                    rus: "Как 2",
                ),
                description: None,
                uniforms: {
                    "arrow_scale": ProvidedToUser,
                    "black_border_size": FromDev,
                    "border_size": FromDev,
                    "cube_position": ProvidedToUser,
                    "cube_scale": ProvidedToUser,
                    "filter_teleported": FromDev,
                    "gray_room": FromDev,
                    "pass_angle": FromDev,
                    "pass_not_disable_orange_portal": FromDev,
                    "pass_offset": FromDev,
                    "pass_progress": FromDev,
                    "pass_scale": FromDev,
                    "pass_use_teleported_matrix": FromDev,
                    "portal_scale": ProvidedToUser,
                    "progress": ProvidedToUser,
                    "progress_2": ProvidedToUser,
                    "room_size_x": FromDev,
                    "room_size_y": FromDev,
                    "room_size_z": FromDev,
                    "shape": FromDev,
                    "show_arrow": Changed(Some(Inline(Bool(true)))),
                    "show_cube": ProvidedToUser,
                    "show_object": FromDev,
                    "show_teleported": FromDev,
                    "speed": FromDev,
                    "teleport_light": FromDev,
                    "tr_x": FromDev,
                    "tr_y": FromDev,
                    "tr_z": FromDev,
                    "violet_progress": ProvidedToUser,
                },
                matrices: {
                    "a": FromDev,
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Value(0),
                            z: Uniform(Some(Inline(Formula(("1 - progress_2 * 1.73"))))),
                        ),
                        rotate: (
                            x: Uniform(Some(Inline(Formula(("deg2rad(-90) * progress"))))),
                            y: Uniform(Some(Inline(Formula(("deg2rad(-90) * progress"))))),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Uniform(Some(Named("portal_scale"))),
                    )))),
                    "b1": FromDev,
                    "b2": FromDev,
                    "b_pass": FromDev,
                    "b_pass_on_a": FromDev,
                    "b_pic4": FromDev,
                    "c0": FromDev,
                    "cube": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Value(0),
                            z: Uniform(Some(Inline(Formula(("-2 * cube_position"))))),
                        ),
                        rotate: (
                            x: Value(0),
                            y: Value(0.05235987755982988),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Uniform(Some(Inline(Formula(("cube_scale"))))),
                    )))),
                    "cube2": FromDev,
                    "cube_teleported": FromDev,
                    "empty": FromDev,
                    "room_origin": FromDev,
                    "tr": FromDev,
                    "tra0": FromDev,
                    "tra1": FromDev,
                    "tra2": FromDev,
                },
                set_cam: None,
                cams: {
                    "a": false,
                    "b": false,
                },
                hidden: true,
            ),
        ),
    ]),
    current_stage: Animation("how"),
    dev_stage: (
        uniforms: {
            "arrow_scale": Progress(0),
            "black_border_size": Formula(("0.01")),
            "border_size": Formula(("0.035")),
            "cube_position": Progress(0),
            "cube_scale": Progress(1),
            "double_sided": Bool(false),
            "filter_teleported": Bool(true),
            "gray_room": Bool(false),
            "pass_angle": Angle(0.7853981633974483),
            "pass_not_disable_orange_portal": Bool(false),
            "pass_offset": Float((
                min: Some(-0.5),
                max: Some(1.5),
                value: 0,
            )),
            "pass_progress": Float((
                min: Some(-0.5),
                max: Some(1.5),
                value: 0,
            )),
            "pass_scale": Float((
                min: Some(0),
                max: Some(1.5),
                value: 1,
            )),
            "pass_use_teleported_matrix": Bool(false),
            "portal_scale": Progress(1),
            "progress": Progress(0),
            "progress_2": Progress(0),
            "room_size_x": Float((
                min: Some(0),
                max: None,
                value: 4,
            )),
            "room_size_y": Float((
                min: Some(0),
                max: None,
                value: 4,
            )),
            "room_size_z": Float((
                min: Some(0),
                max: None,
                value: 4,
            )),
            "shape": Int((
                min: Some(0),
                max: Some(2),
                value: 0,
            )),
            "show_arrow": Bool(false),
            "show_cube": Bool(false),
            "show_object": Bool(false),
            "show_teleported": Int((
                min: Some(0),
                max: Some(50),
                value: 10,
            )),
            "speed": Progress(0.1),
            "teleport_light": Bool(true),
            "tr_x": Progress(0),
            "tr_y": Progress(0),
            "tr_z": Progress(0),
            "violet_progress": Progress(0),
        },
        matrices: {
            "a": Simple(
                offset: (0, 0, -1),
                scale: 1,
                rotate: (0, 0, 0),
                mirror: (false, false, false),
            ),
            "b0": Simple(
                offset: (0, 0, 1),
                scale: 1,
                rotate: (0, 0, 0),
                mirror: (false, false, false),
            ),
            "b1": Teleport(
                first_portal: Some(Named("a")),
                second_portal: Some(Named("b0")),
                what: Some(Named("b0")),
            ),
            "b2": Teleport(
                first_portal: Some(Named("a")),
                second_portal: Some(Named("b0")),
                what: Some(Named("b1")),
            ),
            "b_pass": Mul(
                to: Some(Inline(Simple(
                    offset: (0, 0, 0),
                    scale: 1,
                    rotate: (3.141592653589793, 0, 3.141592653589793),
                    mirror: (false, false, false),
                ))),
                what: Some(Inline(Parametrized(
                    offset: (
                        x: Uniform(Some(Inline(Formula(("(-(2^0.5)/2*(1-pass_offset)-((2^0.5)/2+border_size+black_border_size)*cos(pass_angle)*pass_scale) * (1-2*pass_progress)-(2^0.5)/2*pass_offset"))))),
                        y: Value(0),
                        z: Uniform(Some(Inline(Formula(("((2^0.5)/2+border_size+black_border_size)*sin(pass_angle)*pass_scale * (1-2*pass_progress)"))))),
                    ),
                    rotate: (
                        x: Value(0),
                        y: Uniform(Some(Named("pass_angle"))),
                        z: Value(0),
                    ),
                    mirror: (
                        x: Value(0),
                        y: Value(0),
                        z: Value(0),
                    ),
                    scale: Uniform(Some(Named("pass_scale"))),
                ))),
            ),
            "b_pass_on_a": Teleport(
                first_portal: Some(Inline(Simple(
                    offset: (0, 0, 0),
                    scale: 1,
                    rotate: (0, 0, 0),
                    mirror: (false, false, false),
                ))),
                second_portal: Some(Named("a")),
                what: Some(Named("b_pass")),
            ),
            "b_pic4": Simple(
                offset: (-0.42, 0.01, -0.02),
                scale: 1,
                rotate: (4.9218284906240095, 4.71238898038469, 0),
                mirror: (true, false, false),
            ),
            "c0": Parametrized(
                offset: (
                    x: Value(-1.66),
                    y: Value(0),
                    z: Value(-0.02),
                ),
                rotate: (
                    x: Value(0),
                    y: Value(4.71238898038469),
                    z: Value(0),
                ),
                mirror: (
                    x: Value(0),
                    y: Value(0),
                    z: Value(0),
                ),
                scale: Uniform(Some(Inline(Formula(("violet_progress"))))),
            ),
            "cube": Simple(
                offset: (0, 0, 0),
                scale: 1,
                rotate: (0, 3.141592653589793, 0),
                mirror: (false, false, false),
            ),
            "cube2": Mul(
                to: Some(Inline(Simple(
                    offset: (0, 0, 0),
                    scale: 0.07,
                    rotate: (0, 0, 0),
                    mirror: (false, false, false),
                ))),
                what: Some(Named("cube")),
            ),
            "cube_teleported": Teleport(
                first_portal: Some(Named("a")),
                second_portal: Some(Named("b0")),
                what: Some(Named("cube2")),
            ),
            "empty": Simple(
                offset: (0, 0, 0),
                scale: 1,
                rotate: (0, 0, 0),
                mirror: (false, false, false),
            ),
            "room_origin": Simple(
                offset: (0, 0, 0),
                scale: 1,
                rotate: (0, 0, 0),
                mirror: (false, false, false),
            ),
            "tr": Simple(
                offset: (0.27, 0.39, -1.01),
                scale: 0.1,
                rotate: (1.5707963267948966, 0, 0),
                mirror: (false, false, false),
            ),
            "tra0": Teleport(
                first_portal: Some(Named("a")),
                second_portal: Some(Named("b0")),
                what: Some(Named("tr")),
            ),
            "tra1": Teleport(
                first_portal: Some(Named("a")),
                second_portal: Some(Named("b1")),
                what: Some(Named("tr")),
            ),
            "tra2": Teleport(
                first_portal: Some(Named("a")),
                second_portal: Some(Named("b2")),
                what: Some(Named("tr")),
            ),
        },
    ),
    animations: ([
        (
            name: "intro.1",
            data: (
                duration: 3,
                animation_stage: Animation("How 2"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: false,
                use_start_cam_as_end: false,
                cam_start: Some(Inline((
                    look_at: Coordinate((0, 0, 0)),
                    alpha: -0.8084996795654297,
                    beta: 1.3585817337036128,
                    r: 2.173224630707043,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                ))),
                cam_end: Some(Inline((
                    look_at: Coordinate((0, 0, 0)),
                    alpha: 0.4130013084411631,
                    beta: 1.1425471496582034,
                    r: 2.173224630707043,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                ))),
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: InOut,
            ),
        ),
        (
            name: "intro.2",
            data: (
                duration: 1,
                animation_stage: Animation("How 2"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": Changed(Some(Inline(Formula(("easing_in_out(time)"))))),
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "intro.3",
            data: (
                duration: 1,
                animation_stage: Animation("How 2"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": Changed(Some(Inline(Progress(1)))),
                    "progress_2": Changed(Some(Inline(Formula(("easing_in_out(time)"))))),
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "intro.4",
            data: (
                duration: 1,
                animation_stage: Animation("How 2"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": Changed(Some(Inline(Progress(1)))),
                    "progress_2": Changed(Some(Inline(Formula(("easing_in_out(1.0-time)"))))),
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "intro.5",
            data: (
                duration: 1,
                animation_stage: Animation("How 2"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": Changed(Some(Inline(Formula(("0.5 + easing_in_out(1.0 - time) * 0.5"))))),
                    "progress": Changed(Some(Inline(Progress(1)))),
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "intro.6",
            data: (
                duration: 2,
                animation_stage: Animation("How 2"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": Changed(Some(Inline(Progress(0.5)))),
                    "progress": Changed(Some(Inline(Progress(1)))),
                    "progress_2": Changed(Some(Inline(Formula(("easing_in_out(time) / 1.73 * 1.9"))))),
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "intro.7",
            data: (
                duration: 2,
                animation_stage: Animation("How 2"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": Changed(Some(Inline(Progress(0.5)))),
                    "progress": Changed(Some(Inline(Progress(1)))),
                    "progress_2": Changed(Some(Inline(Formula(("1.9 / 1.73"))))),
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: false,
                cam_start: None,
                cam_end: Some(Inline((
                    look_at: Coordinate((0, 0.16, -1)),
                    alpha: 1.0605002403259283,
                    beta: 1.3062107086181642,
                    r: 1.2267286481848738,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                ))),
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: InOut,
            ),
        ),
        (
            name: "intro.8",
            data: (
                duration: 3,
                animation_stage: Animation("How 2"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": Changed(Some(Inline(Progress(0.5)))),
                    "progress": Changed(Some(Inline(Progress(1)))),
                    "progress_2": Changed(Some(Inline(Formula(("1.9 / 1.73 + easing_in(time) * 0.5"))))),
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: false,
                cam_start: None,
                cam_end: Some(Inline((
                    look_at: Coordinate((0, 0.16, -1)),
                    alpha: 1.0605002403259283,
                    beta: 1.3062107086181642,
                    r: 1.2267286481848738,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                ))),
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "degrees.0",
            data: (
                duration: 5,
                animation_stage: Animation("how"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": Changed(Some(Inline(Bool(false)))),
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": Changed(Some(Inline(Formula(("easing_in_out(time)"))))),
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": Changed(Some(Inline(Int((
                        min: None,
                        max: None,
                        value: 100,
                    ))))),
                    "speed": CopyPrev,
                    "teleport_light": Changed(Some(Inline(Bool(false)))),
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: false,
                use_start_cam_as_end: true,
                cam_start: Some(Inline((
                    look_at: Coordinate((0, 0, -1)),
                    alpha: 0.55299997329712,
                    beta: 1.1949189758300793,
                    r: 2.892561983471077,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                ))),
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "degrees.1",
            data: (
                duration: 5,
                animation_stage: RealAnimation("degrees.0"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": Changed(Some(Inline(Bool(true)))),
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "border.0",
            data: (
                duration: 3,
                animation_stage: Animation("how"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": Changed(Some(Inline(Formula(("0.5 + easing_in_out(time) * 0.5"))))),
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": Changed(Some(Inline(Bool(false)))),
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: false,
                use_start_cam_as_end: true,
                cam_start: Some(Inline((
                    look_at: Coordinate((0, 0, -1)),
                    alpha: 0.542500133514406,
                    beta: 0.7890345191955582,
                    r: 1.4843416643036984,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                ))),
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.positions.0",
            data: (
                duration: 1,
                animation_stage: Animation("explore"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "double_sided": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Value(0),
                            z: Uniform(Some(Inline(Formula(("0.27 + easing_in_out(1-time)*0.33"))))),
                        ),
                        rotate: (
                            x: Value(4.71238898038469),
                            y: Value(4.71238898038469),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    )))),
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: false,
                use_start_cam_as_end: true,
                cam_start: Some(Inline((
                    look_at: Coordinate((0, 0, 0.01)),
                    alpha: -5.292462612390531,
                    beta: 1.0901753234863285,
                    r: 2.173224630707043,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                ))),
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.positions.1",
            data: (
                duration: 1,
                animation_stage: RealAnimation("v2.positions.0"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Uniform(Some(Inline(Formula(("-0.45*easing_in_out(time)"))))),
                            y: Value(0),
                            z: Value(0.6),
                        ),
                        rotate: (
                            x: Value(4.71238898038469),
                            y: Value(4.71238898038469),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    )))),
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.positions.2",
            data: (
                duration: 1,
                animation_stage: RealAnimation("v2.positions.0"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Value(-0.45),
                            y: Value(0),
                            z: Uniform(Some(Inline(Formula(("0.6-0.63*easing_in_out(time)"))))),
                        ),
                        rotate: (
                            x: Value(4.71238898038469),
                            y: Value(4.71238898038469),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    )))),
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.positions.3",
            data: (
                duration: 1,
                animation_stage: RealAnimation("v2.positions.0"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Uniform(Some(Inline(Formula(("lerp(-0.45, -0.19, easing_in_out(time))"))))),
                            y: Value(0),
                            z: Value(0.6),
                        ),
                        rotate: (
                            x: Uniform(Some(Inline(Formula(("deg2rad(lerp(270, 322, easing_in_out(time)))"))))),
                            y: Uniform(Some(Inline(Formula(("deg2rad(lerp(270, 275, easing_in_out(time)))"))))),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    )))),
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.positions.4",
            data: (
                duration: 1,
                animation_stage: RealAnimation("v2.positions.0"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Value(-0.19),
                            y: Value(0),
                            z: Uniform(Some(Inline(Formula(("lerp(0.6, 0., easing_in_out(time))"))))),
                        ),
                        rotate: (
                            x: Value(5.619960191421741),
                            y: Value(4.799655442984406),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    )))),
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.positions.5",
            data: (
                duration: 1,
                animation_stage: RealAnimation("v2.positions.0"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Uniform(Some(Inline(Formula(("lerp(-0.19, 0., easing_in_out(time))"))))),
                            y: Uniform(Some(Inline(Formula(("lerp(0, -0.20, easing_in_out(time))"))))),
                            z: Value(0.6),
                        ),
                        rotate: (
                            x: Uniform(Some(Inline(Formula(("deg2rad(lerp(322, 333, easing_in_out(time)))"))))),
                            y: Uniform(Some(Inline(Formula(("deg2rad(lerp(275, 180, easing_in_out(time)))"))))),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    )))),
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.positions.6",
            data: (
                duration: 1,
                animation_stage: RealAnimation("v2.positions.0"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Value(-0.2),
                            z: Uniform(Some(Inline(Formula(("lerp(0.6, 0.15, easing_in_out(time))"))))),
                        ),
                        rotate: (
                            x: Value(5.811946409141117),
                            y: Value(3.141592653589793),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(1),
                    )))),
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.degrees.0",
            data: (
                duration: 2,
                animation_stage: Animation("explore"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "filter_teleported": Changed(Some(Inline(Bool(false)))),
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": Changed(Some(Inline(FormulaInt(("3+time*50"))))),
                    "speed": CopyPrev,
                    "teleport_light": Changed(Some(Inline(Bool(false)))),
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: false,
                use_start_cam_as_end: true,
                cam_start: Some(Inline((
                    look_at: Coordinate((0, 0, 0)),
                    alpha: -5.715962158441559,
                    beta: 1.2145600128173852,
                    r: 2.6296018031555253,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                ))),
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.small.0",
            data: (
                duration: 2,
                animation_stage: Animation("explore"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "double_sided": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": Changed(Some(Inline(Bool(false)))),
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Value(0),
                            z: Uniform(Some(Inline(Formula(("lerp(0.8, -0.1, easing_in_out(time))"))))),
                        ),
                        rotate: (
                            x: Value(4.71238898038469),
                            y: Value(4.71238898038469),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(0.75),
                    )))),
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: false,
                use_start_cam_as_end: true,
                cam_start: Some(Inline((
                    look_at: Coordinate((0, 0, -0.38)),
                    alpha: -5.239962211847313,
                    beta: 1.234197044372565,
                    r: 1.6327758307340703,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                ))),
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.small.1",
            data: (
                duration: 2,
                animation_stage: RealAnimation("v2.small.0"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "double_sided": CopyPrev,
                    "filter_teleported": Changed(Some(Inline(Bool(false)))),
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.screenshot.0",
            data: (
                duration: 2,
                animation_stage: Animation("explore"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "double_sided": Changed(Some(Inline(Bool(true)))),
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": Changed(Some(Inline(Formula(("-0.07+easing_in_out(1.-time)"))))),
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": Changed(Some(Inline(Int((
                        min: None,
                        max: None,
                        value: 1,
                    ))))),
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": Changed(Some(Inline(Parametrized(
                        offset: (
                            x: Value(0),
                            y: Value(0),
                            z: Uniform(Some(Inline(Formula(("progress"))))),
                        ),
                        rotate: (
                            x: Value(4.71238898038469),
                            y: Value(4.71238898038469),
                            z: Value(0),
                        ),
                        mirror: (
                            x: Value(0),
                            y: Value(0),
                            z: Value(0),
                        ),
                        scale: Value(0.75),
                    )))),
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: false,
                use_start_cam_as_end: true,
                cam_start: Some(Inline((
                    look_at: Coordinate((0, -0.24, -1.21)),
                    alpha: 20.10095699521869,
                    beta: 1.2479104151759453,
                    r: 2.56,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                ))),
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.screenshot.1",
            data: (
                duration: 2,
                animation_stage: RealAnimation("v2.screenshot.0"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "double_sided": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": Changed(Some(Inline(Bool(false)))),
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.screenshot.2",
            data: (
                duration: 2,
                animation_stage: RealAnimation("v2.screenshot.1"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "double_sided": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": Changed(Some(Inline(Formula(("0.005+easing_in_out(1.-time)"))))),
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.screenshot.3",
            data: (
                duration: 1,
                animation_stage: RealAnimation("v2.screenshot.2"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "double_sided": CopyPrev,
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": Changed(Some(Inline(Formula(("lerp(0.005, -0.07, easing_in_out(time))"))))),
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.screenshot.4",
            data: (
                duration: 1,
                animation_stage: RealAnimation("v2.screenshot.1"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "double_sided": CopyPrev,
                    "filter_teleported": Changed(Some(Inline(Bool(false)))),
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": CopyPrev,
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: true,
                use_start_cam_as_end: true,
                cam_start: None,
                cam_end: None,
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
        (
            name: "v2.around.0",
            data: (
                duration: 6,
                animation_stage: Animation("explore"),
                uniforms: ({
                    "arrow_scale": CopyPrev,
                    "black_border_size": CopyPrev,
                    "border_size": CopyPrev,
                    "cube_position": CopyPrev,
                    "cube_scale": CopyPrev,
                    "double_sided": Changed(Some(Inline(Bool(false)))),
                    "filter_teleported": CopyPrev,
                    "gray_room": CopyPrev,
                    "pass_angle": CopyPrev,
                    "pass_not_disable_orange_portal": CopyPrev,
                    "pass_offset": CopyPrev,
                    "pass_progress": CopyPrev,
                    "pass_scale": CopyPrev,
                    "pass_use_teleported_matrix": CopyPrev,
                    "portal_scale": CopyPrev,
                    "progress": CopyPrev,
                    "progress_2": CopyPrev,
                    "room_size_x": CopyPrev,
                    "room_size_y": CopyPrev,
                    "room_size_z": CopyPrev,
                    "shape": CopyPrev,
                    "show_arrow": CopyPrev,
                    "show_cube": CopyPrev,
                    "show_object": CopyPrev,
                    "show_teleported": CopyPrev,
                    "speed": CopyPrev,
                    "teleport_light": Changed(Some(Inline(Bool(false)))),
                    "tr_x": CopyPrev,
                    "tr_y": CopyPrev,
                    "tr_z": CopyPrev,
                    "violet_progress": CopyPrev,
                }),
                matrices: ({
                    "a": CopyPrev,
                    "b0": CopyPrev,
                    "b1": CopyPrev,
                    "b2": CopyPrev,
                    "b_pass": CopyPrev,
                    "b_pass_on_a": CopyPrev,
                    "b_pic4": CopyPrev,
                    "c0": CopyPrev,
                    "cube": CopyPrev,
                    "cube2": CopyPrev,
                    "cube_teleported": CopyPrev,
                    "empty": CopyPrev,
                    "room_origin": CopyPrev,
                    "tr": CopyPrev,
                    "tra0": CopyPrev,
                    "tra1": CopyPrev,
                    "tra2": CopyPrev,
                }),
                use_prev_cam: false,
                use_start_cam_as_end: false,
                cam_start: Some(Inline((
                    look_at: Coordinate((0, 0, 0)),
                    alpha: 6.9339572355446055,
                    beta: 1.110431567672284,
                    r: 1.9233658903080386,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                ))),
                cam_end: Some(Inline((
                    look_at: Coordinate((0, 0, 0)),
                    alpha: 0.6510078109938848,
                    beta: 1.110431567672284,
                    r: 1.9233658903080386,
                    in_subspace: false,
                    free_movement: false,
                    matrix: (1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                ))),
                use_any_cam_as_start: None,
                use_any_cam_as_end: None,
                cam_any_start: None,
                cam_any_end: None,
                cam_easing: Linear,
            ),
        ),
    ]),
    use_time: true,
    skybox: None,
)